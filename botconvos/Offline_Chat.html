<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAI Library</title>
    <style type="text/css">
        /* Themes */
        :root {
            --body-bg: #f5f8fa;
            --border-color: #efefef;
            --messagebox-bg: #ffffff;
            --messagebox-bg-transparent: rgba(255, 255, 255, 0.6);
            --messagebox-shadow: rgba(0, 0, 0, 0.1);
            --font-color: #1f1f1f;
            --rgba-1: rgba(0, 0, 0, 0.05);
            --rgba-2: rgba(0, 0, 0, 0.1);
        }

        .dark_mode {
            --body-bg: #18181b;
            --border-color: #4f4f4f;
            --messagebox-bg: #26272b;
            --messagebox-bg-transparent: rgba(38, 39, 43, 0.8);
            --messagebox-shadow: rgba(0, 0, 0, 0);
            --font-color: #ededed;
            --rgba-1: rgba(255, 255, 255, 0.06);
            --rgba-2: rgba(255, 255, 255, 0.2);
        }



        * {
            box-sizing: border-box;
        }

        button,
        select,
        img {
            user-select: none;
        }

        ol,
        ul,
        li,
        a,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        p {
            text-decoration: none;
            margin: 0;
            padding: 0;
        }

        .italic {
            font-style: italic;
        }

        .bold {
            font-weight: bold;
        }

        .bold-italic {
            font-weight: bold;
            font-style: italic;
        }

        html,
        body {
            min-height: 100%;
        }

        html {
            font-size: 14px;
        }

        body {
            padding: 0;
            margin: 0;
            background-color: var(--body-bg);
            color: var(--font-color);
            transition: all 0.5s ease-in-out 0s;
        }

        .content-cont {
            display: flex;
            flex-direction: row;
        }


        /* NAV / Drawer */

        @keyframes slideIn {
            0% {
                opacity: 0;
                left: -200px;
            }

            100% {
                opacity: 1;
                left: 0;
            }
        }

        .drawer-cont.active {
            display: block;
        }

        .drawer-cont {
            display: none;
            position: fixed;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            width: 100%;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 100;
        }

        nav {
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            max-width: 80%;
            background-color: var(--body-bg);

            display: flex;
            flex-direction: column;
            padding: 10px 0;
            overflow: hidden;
            animation: slideIn 0.2s ease-in-out;
            -webkit-box-shadow: 4px 0px 15px 0px rgba(0, 0, 0, 0.2);
            -moz-box-shadow: 4px 0px 15px 0px rgba(0, 0, 0, 0.2);
            box-shadow: 4px 0px 15px 0px rgba(0, 0, 0, 0.2);
        }

        .nav-header {
            width: 100%;
            display: flex;
            flex-direction: column;
            padding: 0 10px 0 20px;
            margin-bottom: 20px;
            gap: 10px;
        }

        .close_drawer-btn {
            align-self: flex-end;
            padding: 10px;
            transition: background-color 0.1s ease-in-out;
            cursor: pointer;
            border-radius: 8px;
        }

        .close_drawer-btn:hover {
            background-color: var(--rgba-1);
        }

        .close_drawer-btn svg {
            display: flex;
            width: 30px;
            height: 30px;
            color: var(--font-color);
        }

        /*.nav-new_char-btn {
            align-self: flex-start;
            outline: none;
            border: none;
            color: #ffffff;
            border-radius: 6px;
            padding: 10px 20px;
            font-size: 1.1rem;
            cursor: pointer;
            background-color: #4e9733;
            transition: background-color 0.1s ease-in-out;
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
        }

        .nav-new_char-btn:hover {
            background-color: #6ba755;
        }*/

        .history_list-header {
            font-size: 1.5rem;
            padding: 10px 20px;
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
            margin-bottom: 10px;
        }

        .history_list {
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        .history_item {
            transition: background-color 0.1s ease-in-out;
            padding: 20px 30px 20px 20px;
            cursor: pointer;
            border-bottom: 1px solid var(--rgba-2);
        }

        .history_item:first-child {
            border-top: 1px solid var(--rgba-2);
        }

        .history_item:hover {
            background-color: var(--rgba-1);
        }

        .history_item p {
            font-family: Arial, Helvetica, sans-serif;
        }

        .history_item p .chat-date {
            font-style: italic;
            font-size: 1.3rem;
            margin-bottom: 6px;
        }

        /*nav .char-item {
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 10px;
            transition: background-color 0.1s ease-in-out;
            padding: 10px 40px 10px 20px;
            cursor: pointer;
        }

        nav .char-item:hover {
            background-color: var(--rgba-1);
        }

        nav .nav-avatar-wrap {
            width: 40px;
            height: 40px;
        }

        nav .nav-avatar-wrap img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
        }

        nav .char-item span {
            font-size: 1.3rem;
            font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
        }*/

        /* MAIN */
        main {
            display: flex;
            flex-direction: column;
            padding: 0 4%;
            width: 100%;
        }

        /* HEADER */
        header {
            padding: 6px 6px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 16px;
        }

        .open_drawer-wrap svg {
            display: flex;
            width: 46px;
            height: 46px;
            color: var(--font-color);
        }


        .theme_switch {
            margin-left: auto;
            display: flex;
            align-items: center;
            gap: 10px;
            position: relative;
        }

        .theme_switch span {
            font-size: 1.1rem;
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
        }

        .change-bg-wrap {
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 5px;
        }

        .change-bg {
            outline: transparent;
            border: 1px solid var(--border-color);
            color: var(--font-color);
            background-color: var(--body-bg);
            padding: 4px 5px;
            font-size: 1.1rem;
            border-radius: 4px;
            cursor: pointer;
        }

        .change-bg-wrap .delete-bg {
            color: var(--font-color);
            cursor: pointer;
            display: flex;
        }

        .change-bg-wrap .delete-bg:hover {
            color: #e20909;
        }

        .dark-mode-span {
            display: none;
        }

        .tswitch_box[type=checkbox] {
            height: 0;
            width: 0;
            visibility: hidden;
            position: absolute;
        }

        .tswitch_label {
            cursor: pointer;
            text-indent: -9999px;
            width: 60px;
            height: 30px;
            display: block;
            border-radius: 15px;
            position: relative;
            border: 1px solid #323232;
            background: #f5f8fa;
        }

        .tswitch_label:after {
            content: '';
            position: absolute;
            top: 4px;
            left: 4px;
            width: 20px;
            height: 20px;
            border-radius: 50px;
            transition: 0.2s;
            background: #323232;
        }

        .tswitch_box:checked+label {
            background: #323232;
            border: 1px solid #f5f8fa;
        }

        .tswitch_box:checked+label:after {
            left: calc(100% - 5px);
            transform: translateX(-100%);
            background: #f5f8fa;
        }

        .tswitch_label:active:after {
            width: 25px;
        }

        /*.update_current_char-btn {
            margin-left: auto;
            outline: none;
            border: none;
            color: #ffffff;
            border-radius: 6px;
            padding: 10px 20px;
            font-size: 1rem;
            align-self: center;
            cursor: pointer;
            background-color: #336c97;
            transition: background-color 0.1s ease-in-out;
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
        }

        .update_current_char-btn:hover {
            background-color: #5f829d;
        }*/

        body.custom-bg {
            background-repeat: no-repeat;
            background-size: cover;
            background-position: 50% 50%;
            background-attachment: fixed;
        }

        body.custom-bg .chat .chat_content-wrap {
            background-color: var(--messagebox-bg-transparent) !important;
        }


        /* CONVERSATION */
        .character_name-cont {
            text-align: center;
            padding: 20px 10px;
        }

        .character_name-cont h3 {
            font-size: 1.3rem;
            font-weight: 400;
            font-family: Verdana, Geneva, Tahoma, sans-serif;
        }

        .chat {
            display: flex;
            flex-direction: column;
            gap: 20px;
            align-self: center;
            padding-bottom: 30px;
        }

        .chat_message-item {
            display: flex;
            flex-direction: row;
            align-items: flex-start;
            gap: 10px;
        }

        .chat .avatar-wrap {
            flex-shrink: 0;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            overflow: hidden;
        }

        .chat .avatar-wrap>* {
            width: 100%;
            height: 100%;
            border-radius: 50%;
        }

        .chat .avatar-wrap .no_avatar-user {
            background-color: #5157cf;
        }

        .chat .avatar-wrap .no_avatar-char {
            background-color: #e20909;
        }

        .chat .chat_content-wrap {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 7px;
            padding: 10px;
            border-radius: 10px;
            box-shadow: 0 2px 4px var(--messagebox-shadow);
            background-color: var(--messagebox-bg);
            overflow: hidden;
        }

        .chat .chat_content-wrap h5 {
            font-size: 1rem;
            font-weight: bold;
            font-family: Arial, Helvetica, sans-serif;
        }

        .chat .chat_content-wrap .message-wrap {
            font-size: 1rem;
            font-family: Arial, Helvetica, sans-serif;
        }


        @media (min-width: 576px) {}

        @media (min-width: 768px) {
            html {
                font-size: 16px;
            }

            nav {
                min-width: 40%;
            }

            header {
                padding: 14px 20px;
            }

            .dark-mode-span {
                display: block;
            }

            .open_drawer-wrap {
                padding: 4px;
                cursor: pointer;
                border-radius: 6px;
                transition: background-color 0.1s ease-in-out;
            }

            .open_drawer-wrap:hover {
                background-color: var(--rgba-1);
            }

            .chat {
                width: 80%;
            }

            .chat .chat_content-wrap {
                padding: 14px;
            }
        }

        @media (min-width: 992px) {
            .chat {
                width: 70%;
            }
        }

        @media (min-width: 1200px) {}

        @media (min-width: 1400px) {}
    </style>
</head>

<body>
    <template id="message_item_template">
        <div class="chat_message-item">
            <div class="avatar-wrap">

            </div>
            <div class="chat_content-wrap">
                <h5>

                </h5>
                <div class="message-wrap">
                    <p>

                    </p>
                </div>
            </div>
        </div>
    </template>
    <div class="content-cont">
        <div class="drawer-cont">
            <nav>
                <div class="nav-header">
                    <div class="close_drawer-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                            class="bi bi-x-lg" viewBox="0 0 16 16">
                            <path
                                d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z" />
                        </svg>
                    </div>
                </div>
                <div class="history_list-header">
                    <span>History</span>
                </div>
                <div class="history_list" id="history_list">

                </div>
            </nav>
        </div>
        <main>
            <header>
                <div class="open_drawer-wrap">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                        class="bi bi-list" viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                            d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z" />
                    </svg>
                </div>

                <div class="theme_switch">
                    <div class="change-bg-wrap">
                        <input type="file" id="bgInput" accept="image/*" hidden />
                        <button type="button" class="change-bg">BG</button>
                        <span class="delete-bg">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor"
                                class="bi bi-x-lg" viewBox="0 0 16 16">
                                <path
                                    d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z" />
                            </svg>
                        </span>
                    </div>
                    <span class="dark-mode-span">Dark Mode:</span>
                    <input type="checkbox" class="tswitch_box" id="tswitch_box" />
                    <label for="tswitch_box" class="tswitch_label">Toggle</label>
                </div>
            </header>
            <div class="character_name-cont">
                <h3>---</h3>
            </div>
            <div class="chat" id="chat">

            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Get body for future use
            const body = document.querySelector('body');

            // Handle theme
            const themeSwitcher = document.querySelector('.tswitch_box[type=checkbox]');
            const cachedTheme = localStorage.getItem('cait_readoffline_theme');
            if (cachedTheme === "dark_mode") {
                body.classList.add('dark_mode');
                themeSwitcher.checked = true;
            }
            themeSwitcher.addEventListener('change', (e) => {
                if (e.target.checked) {
                    body.classList.add('dark_mode');
                    localStorage.setItem('cait_readoffline_theme', 'dark_mode');
                } else {
                    body.classList.remove('dark_mode');
                    localStorage.setItem('cait_readoffline_theme', 'light_mode');
                }
            })

            // Handle background
            // If there is one
            const currentBg = localStorage.getItem('background');
            if (currentBg) {
                changeBg(currentBg);
            }
            // Change by hand
            const bgInput = document.querySelector('#bgInput');
            document.querySelector('.change-bg').addEventListener('click', () => {
                bgInput.click();
            })
            document.querySelector('.delete-bg').addEventListener('click', () => {
                document.body.classList.remove('custom-bg');
                document.body.style.backgroundImage = "unset";
                localStorage.removeItem('background');
            })
            bgInput.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (!file) return;
                const reader = new FileReader();
                reader.onload = () => {
                    // convert image file to base64 string
                    changeBg(reader.result);
                    bgInput.value = "";
                    try {
                        localStorage.setItem('background', reader.result);
                    } catch (error) {
                        alert('Note: File is likely too big to save.')
                        //console.log(error)
                    }
                }
                reader.readAsDataURL(file);
            })
            function changeBg(bg) {
                let objUrl = URL.createObjectURL(dataURItoBlob(bg));
                document.body.classList.add('custom-bg');
                document.body.style.backgroundImage = `url(${objUrl})`;
            }
            function dataURItoBlob(dataURI) {
                let mime = dataURI.split(',')[0].split(':')[1].split(';')[0];
                let binary = atob(dataURI.split(',')[1]);
                let array = [];
                for (let i = 0; i < binary.length; i++) {
                    array.push(binary.charCodeAt(i));
                }
                return new Blob([new Uint8Array(array)], { type: mime });
            }

            // Open and close drawer
            const drawerCont = document.querySelector('.drawer-cont');
            const openDrawerBtn = document.querySelector('.open_drawer-wrap');
            const openDrawer = () => {
                drawerCont.classList.add('active');
            }
            const closeDrawer = () => {
                drawerCont.classList.remove('active');
            }
            openDrawerBtn.addEventListener('click', () => {
                openDrawer();
            });
            document.querySelector('.close_drawer-btn').addEventListener('click', () => {
                closeDrawer();
            });
            document.querySelector('.drawer-cont').addEventListener('click', (e) => {
                // Allows closing from clicking on outside
                if (e.target.closest('nav')) {
                    return;
                }
                closeDrawer();
            });
            // ---------

            // This is replaced by the extension when downloading
            const historyData = JSON.parse(`{"charPic":"data:image/webp;base64,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","userPic":"data:image/webp;base64,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","history":[{"date":"2024-08-02T15:24:44.819Z","chat":[]}]}`);

            // If history is 1 length long, that means we don't need drawer to switch
            // Also means this can be conversation download
            if (historyData.history.length < 2) {
                openDrawerBtn.remove();
            }

            // Write character name on top
            document.querySelector('.character_name-cont h3').textContent = historyData.charName;

            // Get elements for future use
            const historyList = document.getElementById('history_list');
            const chat = document.getElementById('chat');
            const msgItemTemplate = document.getElementById('message_item_template');

            // Get and write the first chat
            const openChat = (index) => {
                chat.innerHTML = "";
                historyData.history[index].chat.forEach(msg => {
                    const clone = msgItemTemplate.content.cloneNode(true);

                    // Check avatar
                    const avatarGood = (msg.isUser && historyData.userPic) || (!msg.isUser && historyData.charPic);
                    const avatar = avatarGood
                        ? document.createElement('img')
                        : document.createElement('div');
                    if (avatarGood) {
                        avatar.src = msg.isUser ? historyData.userPic : historyData.charPic;
                    } else {
                        avatar.classList.add(msg.isUser ? 'no_avatar-user' : 'no_avatar-char');
                    }
                    clone.querySelector('.avatar-wrap').appendChild(avatar);

                    // Write content
                    clone.querySelector('.chat_content-wrap h5').textContent = msg.name;
                    clone.querySelector('.message-wrap p').innerHTML = parseMessageText(decodeURIComponent(msg.message));
                    chat.appendChild(clone);
                });
            }
            openChat(0);

            // Get and write chat list in the drawer
            historyData.history.forEach((chat, index) => {
                const historyItem = document.createElement('div');
                historyItem.classList.add('history_item');
                // Open chat when clicked
                historyItem.addEventListener('click', () => {
                    openChat(index);
                    closeDrawer();
                });
                const historyContent = document.createElement('p');
                historyContent.innerHTML = `<span class="chat-date">${formatDate(chat.date)}</span><br /><br />` + parseMessageText(decodeURIComponent(chat.chat[chat.chat.length - 1].message));
                historyItem.appendChild(historyContent);
                historyList.appendChild(historyItem);
            });

            function parseMessageText(message) {
                // Clean up memory reminders (second check)
                message.replace(/\[-\]\(#- "Memory:.*?"\)/g, '');
                // Replace ***text*** with bold-italic
                message = message.replace(/\*\*\*([\s\S]*?)\*\*\*/g, '<span class="bold-italic">$1</span>');
                // Replace **text** with bold
                message = message.replace(/\*\*([\s\S]*?)\*\*/g, '<span class="bold">$1</span>');
                // Replace *text* with italic
                message = message.replace(/\*([\s\S]*?)\*/g, '<span class="italic">$1</span>');
                // Replace newline (\n) with line break (<br>)
                message = message.trim().replace(/\n/g, '<br>');
                return message;
            }

            function formatDate(dateString) {
                const months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

                const date = new Date(dateString);
                const year = date.getFullYear();
                const monthIndex = date.getMonth();
                const monthName = months[monthIndex];
                const day = String(date.getDate()).padStart(2, '0');
                const hour = String(date.getHours()).padStart(2, '0');
                const minute = String(date.getMinutes()).padStart(2, '0');

                return `${year} ${monthName} ${day} - ${hour}:${minute}`;
            }
        }, false);
    </script>

</body>

</html>