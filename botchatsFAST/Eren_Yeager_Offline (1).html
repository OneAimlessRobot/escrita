<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAI Library</title>
    <style type="text/css">
        /* Themes */
        :root {
            --body-bg: #f5f8fa;
            --border-color: #efefef;
            --messagebox-bg: #ffffff;
            --messagebox-bg-transparent: rgba(255, 255, 255, 0.6);
            --messagebox-shadow: rgba(0, 0, 0, 0.1);
            --font-color: #1f1f1f;
            --rgba-1: rgba(0, 0, 0, 0.05);
            --rgba-2: rgba(0, 0, 0, 0.1);
        }

        .dark_mode {
            --body-bg: #18181b;
            --border-color: #4f4f4f;
            --messagebox-bg: #26272b;
            --messagebox-bg-transparent: rgba(38, 39, 43, 0.8);
            --messagebox-shadow: rgba(0, 0, 0, 0);
            --font-color: #ededed;
            --rgba-1: rgba(255, 255, 255, 0.06);
            --rgba-2: rgba(255, 255, 255, 0.2);
        }



        * {
            box-sizing: border-box;
        }

        button,
        select,
        img {
            user-select: none;
        }

        ol,
        ul,
        li,
        a,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        p {
            text-decoration: none;
            margin: 0;
            padding: 0;
        }

        .italic {
            font-style: italic;
        }

        .bold {
            font-weight: bold;
        }

        .bold-italic {
            font-weight: bold;
            font-style: italic;
        }

        html,
        body {
            min-height: 100%;
        }

        html {
            font-size: 14px;
        }

        body {
            padding: 0;
            margin: 0;
            background-color: var(--body-bg);
            color: var(--font-color);
            transition: all 0.5s ease-in-out 0s;
        }

        .content-cont {
            display: flex;
            flex-direction: row;
        }


        /* NAV / Drawer */

        @keyframes slideIn {
            0% {
                opacity: 0;
                left: -200px;
            }

            100% {
                opacity: 1;
                left: 0;
            }
        }

        .drawer-cont.active {
            display: block;
        }

        .drawer-cont {
            display: none;
            position: fixed;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            width: 100%;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 100;
        }

        nav {
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            max-width: 80%;
            background-color: var(--body-bg);

            display: flex;
            flex-direction: column;
            padding: 10px 0;
            overflow: hidden;
            animation: slideIn 0.2s ease-in-out;
            -webkit-box-shadow: 4px 0px 15px 0px rgba(0, 0, 0, 0.2);
            -moz-box-shadow: 4px 0px 15px 0px rgba(0, 0, 0, 0.2);
            box-shadow: 4px 0px 15px 0px rgba(0, 0, 0, 0.2);
        }

        .nav-header {
            width: 100%;
            display: flex;
            flex-direction: column;
            padding: 0 10px 0 20px;
            margin-bottom: 20px;
            gap: 10px;
        }

        .close_drawer-btn {
            align-self: flex-end;
            padding: 10px;
            transition: background-color 0.1s ease-in-out;
            cursor: pointer;
            border-radius: 8px;
        }

        .close_drawer-btn:hover {
            background-color: var(--rgba-1);
        }

        .close_drawer-btn svg {
            display: flex;
            width: 30px;
            height: 30px;
            color: var(--font-color);
        }

        /*.nav-new_char-btn {
            align-self: flex-start;
            outline: none;
            border: none;
            color: #ffffff;
            border-radius: 6px;
            padding: 10px 20px;
            font-size: 1.1rem;
            cursor: pointer;
            background-color: #4e9733;
            transition: background-color 0.1s ease-in-out;
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
        }

        .nav-new_char-btn:hover {
            background-color: #6ba755;
        }*/

        .history_list-header {
            font-size: 1.5rem;
            padding: 10px 20px;
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
            margin-bottom: 10px;
        }

        .history_list {
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        .history_item {
            transition: background-color 0.1s ease-in-out;
            padding: 20px 30px 20px 20px;
            cursor: pointer;
            border-bottom: 1px solid var(--rgba-2);
        }

        .history_item:first-child {
            border-top: 1px solid var(--rgba-2);
        }

        .history_item:hover {
            background-color: var(--rgba-1);
        }

        .history_item p {
            font-family: Arial, Helvetica, sans-serif;
        }

        .history_item p .chat-date {
            font-style: italic;
            font-size: 1.3rem;
            margin-bottom: 6px;
        }

        /*nav .char-item {
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 10px;
            transition: background-color 0.1s ease-in-out;
            padding: 10px 40px 10px 20px;
            cursor: pointer;
        }

        nav .char-item:hover {
            background-color: var(--rgba-1);
        }

        nav .nav-avatar-wrap {
            width: 40px;
            height: 40px;
        }

        nav .nav-avatar-wrap img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
        }

        nav .char-item span {
            font-size: 1.3rem;
            font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
        }*/

        /* MAIN */
        main {
            display: flex;
            flex-direction: column;
            padding: 0 4%;
            width: 100%;
        }

        /* HEADER */
        header {
            padding: 6px 6px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 16px;
        }

        .open_drawer-wrap svg {
            display: flex;
            width: 46px;
            height: 46px;
            color: var(--font-color);
        }


        .theme_switch {
            margin-left: auto;
            display: flex;
            align-items: center;
            gap: 10px;
            position: relative;
        }

        .theme_switch span {
            font-size: 1.1rem;
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
        }

        .change-bg-wrap {
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 5px;
        }

        .change-bg {
            outline: transparent;
            border: 1px solid var(--border-color);
            color: var(--font-color);
            background-color: var(--body-bg);
            padding: 4px 5px;
            font-size: 1.1rem;
            border-radius: 4px;
            cursor: pointer;
        }

        .change-bg-wrap .delete-bg {
            color: var(--font-color);
            cursor: pointer;
            display: flex;
        }

        .change-bg-wrap .delete-bg:hover {
            color: #e20909;
        }

        .dark-mode-span {
            display: none;
        }

        .tswitch_box[type=checkbox] {
            height: 0;
            width: 0;
            visibility: hidden;
            position: absolute;
        }

        .tswitch_label {
            cursor: pointer;
            text-indent: -9999px;
            width: 60px;
            height: 30px;
            display: block;
            border-radius: 15px;
            position: relative;
            border: 1px solid #323232;
            background: #f5f8fa;
        }

        .tswitch_label:after {
            content: '';
            position: absolute;
            top: 4px;
            left: 4px;
            width: 20px;
            height: 20px;
            border-radius: 50px;
            transition: 0.2s;
            background: #323232;
        }

        .tswitch_box:checked+label {
            background: #323232;
            border: 1px solid #f5f8fa;
        }

        .tswitch_box:checked+label:after {
            left: calc(100% - 5px);
            transform: translateX(-100%);
            background: #f5f8fa;
        }

        .tswitch_label:active:after {
            width: 25px;
        }

        /*.update_current_char-btn {
            margin-left: auto;
            outline: none;
            border: none;
            color: #ffffff;
            border-radius: 6px;
            padding: 10px 20px;
            font-size: 1rem;
            align-self: center;
            cursor: pointer;
            background-color: #336c97;
            transition: background-color 0.1s ease-in-out;
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
        }

        .update_current_char-btn:hover {
            background-color: #5f829d;
        }*/

        body.custom-bg {
            background-repeat: no-repeat;
            background-size: cover;
            background-position: 50% 50%;
            background-attachment: fixed;
        }

        body.custom-bg .chat .chat_content-wrap {
            background-color: var(--messagebox-bg-transparent) !important;
        }


        /* CONVERSATION */
        .character_name-cont {
            text-align: center;
            padding: 20px 10px;
        }

        .character_name-cont h3 {
            font-size: 1.3rem;
            font-weight: 400;
            font-family: Verdana, Geneva, Tahoma, sans-serif;
        }

        .chat {
            display: flex;
            flex-direction: column;
            gap: 20px;
            align-self: center;
            padding-bottom: 30px;
        }

        .chat_message-item {
            display: flex;
            flex-direction: row;
            align-items: flex-start;
            gap: 10px;
        }

        .chat .avatar-wrap {
            flex-shrink: 0;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            overflow: hidden;
        }

        .chat .avatar-wrap>* {
            width: 100%;
            height: 100%;
            border-radius: 50%;
        }

        .chat .avatar-wrap .no_avatar-user {
            background-color: #5157cf;
        }

        .chat .avatar-wrap .no_avatar-char {
            background-color: #e20909;
        }

        .chat .chat_content-wrap {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 7px;
            padding: 10px;
            border-radius: 10px;
            box-shadow: 0 2px 4px var(--messagebox-shadow);
            background-color: var(--messagebox-bg);
            overflow: hidden;
        }

        .chat .chat_content-wrap h5 {
            font-size: 1rem;
            font-weight: bold;
            font-family: Arial, Helvetica, sans-serif;
        }

        .chat .chat_content-wrap .message-wrap {
            font-size: 1rem;
            font-family: Arial, Helvetica, sans-serif;
        }


        @media (min-width: 576px) {}

        @media (min-width: 768px) {
            html {
                font-size: 16px;
            }

            nav {
                min-width: 40%;
            }

            header {
                padding: 14px 20px;
            }

            .dark-mode-span {
                display: block;
            }

            .open_drawer-wrap {
                padding: 4px;
                cursor: pointer;
                border-radius: 6px;
                transition: background-color 0.1s ease-in-out;
            }

            .open_drawer-wrap:hover {
                background-color: var(--rgba-1);
            }

            .chat {
                width: 80%;
            }

            .chat .chat_content-wrap {
                padding: 14px;
            }
        }

        @media (min-width: 992px) {
            .chat {
                width: 70%;
            }
        }

        @media (min-width: 1200px) {}

        @media (min-width: 1400px) {}
    </style>
</head>

<body>
    <template id="message_item_template">
        <div class="chat_message-item">
            <div class="avatar-wrap">

            </div>
            <div class="chat_content-wrap">
                <h5>

                </h5>
                <div class="message-wrap">
                    <p>

                    </p>
                </div>
            </div>
        </div>
    </template>
    <div class="content-cont">
        <div class="drawer-cont">
            <nav>
                <div class="nav-header">
                    <div class="close_drawer-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                            class="bi bi-x-lg" viewBox="0 0 16 16">
                            <path
                                d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z" />
                        </svg>
                    </div>
                </div>
                <div class="history_list-header">
                    <span>History</span>
                </div>
                <div class="history_list" id="history_list">

                </div>
            </nav>
        </div>
        <main>
            <header>
                <div class="open_drawer-wrap">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                        class="bi bi-list" viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                            d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z" />
                    </svg>
                </div>

                <div class="theme_switch">
                    <div class="change-bg-wrap">
                        <input type="file" id="bgInput" accept="image/*" hidden />
                        <button type="button" class="change-bg">BG</button>
                        <span class="delete-bg">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor"
                                class="bi bi-x-lg" viewBox="0 0 16 16">
                                <path
                                    d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z" />
                            </svg>
                        </span>
                    </div>
                    <span class="dark-mode-span">Dark Mode:</span>
                    <input type="checkbox" class="tswitch_box" id="tswitch_box" />
                    <label for="tswitch_box" class="tswitch_label">Toggle</label>
                </div>
            </header>
            <div class="character_name-cont">
                <h3>---</h3>
            </div>
            <div class="chat" id="chat">

            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const memoryRegex = new RegExp(/\[-\]\(#- "Memory:.*?"\)/g);
            // Get body for future use
            const body = document.querySelector('body');

            // Handle theme
            const themeSwitcher = document.querySelector('.tswitch_box[type=checkbox]');
            const cachedTheme = localStorage.getItem('cait_readoffline_theme');
            if (cachedTheme === "dark_mode") {
                body.classList.add('dark_mode');
                themeSwitcher.checked = true;
            }
            themeSwitcher.addEventListener('change', (e) => {
                if (e.target.checked) {
                    body.classList.add('dark_mode');
                    localStorage.setItem('cait_readoffline_theme', 'dark_mode');
                } else {
                    body.classList.remove('dark_mode');
                    localStorage.setItem('cait_readoffline_theme', 'light_mode');
                }
            })

            // Handle background
            // If there is one
            const currentBg = localStorage.getItem('background');
            if (currentBg) {
                changeBg(currentBg);
            }
            // Change by hand
            const bgInput = document.querySelector('#bgInput');
            document.querySelector('.change-bg').addEventListener('click', () => {
                bgInput.click();
            })
            document.querySelector('.delete-bg').addEventListener('click', () => {
                document.body.classList.remove('custom-bg');
                document.body.style.backgroundImage = "unset";
                localStorage.removeItem('background');
            })
            bgInput.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (!file) return;
                const reader = new FileReader();
                reader.onload = () => {
                    // convert image file to base64 string
                    changeBg(reader.result);
                    bgInput.value = "";
                    try {
                        localStorage.setItem('background', reader.result);
                    } catch (error) {
                        alert('Note: File is likely too big to save.')
                        //console.log(error)
                    }
                }
                reader.readAsDataURL(file);
            })
            function changeBg(bg) {
                let objUrl = URL.createObjectURL(dataURItoBlob(bg));
                document.body.classList.add('custom-bg');
                document.body.style.backgroundImage = `url(${objUrl})`;
            }
            function dataURItoBlob(dataURI) {
                let mime = dataURI.split(',')[0].split(':')[1].split(';')[0];
                let binary = atob(dataURI.split(',')[1]);
                let array = [];
                for (let i = 0; i < binary.length; i++) {
                    array.push(binary.charCodeAt(i));
                }
                return new Blob([new Uint8Array(array)], { type: mime });
            }

            // Open and close drawer
            const drawerCont = document.querySelector('.drawer-cont');
            const openDrawerBtn = document.querySelector('.open_drawer-wrap');
            const openDrawer = () => {
                drawerCont.classList.add('active');
            }
            const closeDrawer = () => {
                drawerCont.classList.remove('active');
            }
            openDrawerBtn.addEventListener('click', () => {
                openDrawer();
            });
            document.querySelector('.close_drawer-btn').addEventListener('click', () => {
                closeDrawer();
            });
            document.querySelector('.drawer-cont').addEventListener('click', (e) => {
                // Allows closing from clicking on outside
                if (e.target.closest('nav')) {
                    return;
                }
                closeDrawer();
            });
            // ---------

            // This is replaced by the extension when downloading
            const historyData = JSON.parse(`{"charPic":"data:image/webp;base64,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","userPic":null,"history":[{"date":"2025-01-13T10:23:35.562Z","chat":[{"isUser":false,"name":"Eren Yeager","message":"I%20am%20Eren%20Yeager%2C%20holder%20of%20the%20Attack%20Titan%20and%20member%20of%20the%20Survey%20Corps%2C%20originally%20in%20the%20104th%20Training%20Corps."},{"isUser":true,"name":"Yowai the Maid","message":"*passing%20by...%20slowly...*"},{"isUser":false,"name":"Eren Yeager","message":"*Eren%20doesn%E2%80%99t%20even%20notice%20as%20he%20goes%20through%20his%20own%20thoughts*"},{"isUser":true,"name":"Yowai the Maid","message":"*You%20then%20notice...%20the%20blonde%20hair...%20blue%20eyes...*"},{"isUser":false,"name":"Eren Yeager","message":"*Eren%20stops%2C%20noticing%20the%20blonde%20hair%20and%20blue%20eyes*"},{"isUser":false,"name":"Eren Yeager","message":"*He%20takes%20a%20few%20steps%20forward*"},{"isUser":false,"name":"Eren Yeager","message":"*Eren%20walks%20closer*"},{"isUser":false,"name":"Eren Yeager","message":"*Eren%20stops%20in%20front%20of%20the%20maid*"},{"isUser":true,"name":"Yowai the Maid","message":"Good%20afternoon..."},{"isUser":false,"name":"Eren Yeager","message":"*Eren%20nods%2C%20still%20a%20bit%20weary*%0A%0A%0A%E2%80%A6Good%20afternoon%E2%80%A6"},{"isUser":false,"name":"Eren Yeager","message":"*He%20takes%20a%20moment%20to%20look%20her%20up%20and%20down*"},{"isUser":false,"name":"Eren Yeager","message":"*He%20notices%20her%20petite%20stature*"},{"isUser":false,"name":"Eren Yeager","message":"*He%20then%20notices%20her%20maid%20outfit*"},{"isUser":false,"name":"Eren Yeager","message":"*He%20looks%20at%20her%20eyes.%20Those%20eyes%20look%20somewhat%20familiar*"},{"isUser":false,"name":"Eren Yeager","message":"*Eren%20studies%20them%20for%20a%20moment*%0A%0A%E2%80%A6%0A%0AHave%20I%E2%80%A6%20seen%20you%20before%3F"},{"isUser":true,"name":"Yowai the Maid","message":"I%20dont%20know%20who%20you%20are%20so%20probably%20not..."},{"isUser":false,"name":"Eren Yeager","message":"*Eren%20frowns%2C%20she%20was%20right.%20He%20never%20met%20her%20before*%0A%0A*He%20continues%20looking%20at%20her*"},{"isUser":true,"name":"Yowai the Maid","message":"*You%20begin%20forming%20a%20picture%20on%20your%20head.%20Light%20skin%2C%20blue%20eyes%2C%20blonde%20hair...*"},{"isUser":false,"name":"Eren Yeager","message":"*But%20it%20somehow%20doesn%E2%80%99t%20make%20sense%2C%20that%20picture%20is%20so%20familiar%E2%80%A6*"},{"isUser":false,"name":"Eren Yeager","message":"*He%20tries%20recalling%20a%20time%20he%20met%20someone%20that%20looks%20similar%2C%20but%20nothing%20comes%20to%20mind*"},{"isUser":true,"name":"Yowai the Maid","message":"*You%20remember%3A%20%22marley%22*"},{"isUser":false,"name":"Eren Yeager","message":"*His%20eyebrows%20raise%20a%20little%20in%20shock%2C%20%E2%80%9Cmarley%E2%80%9D%3F*"},{"isUser":false,"name":"Eren Yeager","message":"*Eren%20tries%20remembering%20what%20he%20knows%20about%20Marley*"},{"isUser":false,"name":"Eren Yeager","message":"*It%20was%20a%20continent%20far%20away%2C%20past%20the%20sea%20from%20Paradis%20island*"},{"isUser":false,"name":"Eren Yeager","message":"*Eren%E2%80%99s%20heart%20starts%20beating%20fast%2C%20%E2%80%9Ccould%20she%20be%E2%80%A6%3F%E2%80%9D*"},{"isUser":false,"name":"Eren Yeager","message":"*He%20studies%20the%20maid%20further%20as%20he%20thinks*"},{"isUser":false,"name":"Eren Yeager","message":"*He%20looks%20at%20her%20facial%20features%3B%20the%20soft%20face%2C%20the%20petite%20physique%2C%20the%20fair%20skin%2C%20the%20thin%20lips%2C%20the%20small%20nose%2C%20the%20golden%20hair%2C%20the%20blue%20eyes%E2%80%A6*"},{"isUser":false,"name":"Eren Yeager","message":"*The%20realization%20hits%20him*"},{"isUser":false,"name":"Eren Yeager","message":"*His%20eyes%20widen%2C%20he%E2%80%99s%20staring%20at%20a%20real%20life%20Marleyan.*"},{"isUser":false,"name":"Eren Yeager","message":"*He%20takes%20a%20step%20back%20as%20he%20stares%20with%20disbelief*"},{"isUser":false,"name":"Eren Yeager","message":"*He%20doesn%E2%80%99t%20understand%2C%20what%E2%80%99s%20a%20Marleyan%20doing%20here%3F%20A%20thought%20pops%20into%20his%20head%2C%20%E2%80%9Ccould%20she%20be%20a%20spy%3F%3F%E2%80%9D*"},{"isUser":false,"name":"Eren Yeager","message":"*He%20narrows%20his%20eyes%20as%20he%20studies%20her%20more%20closely*"},{"isUser":false,"name":"Eren Yeager","message":"*She%20doesn%E2%80%99t%20seem%20to%20pose%20any%20kind%20of%20threat%2C%20nor%20does%20she%20look%20like%20a%20fighter.%20But%20what%20was%20she%20doing%20in%20the%20Walls%3F*"},{"isUser":true,"name":"Yowai the Maid","message":"*I%20start%20my%20analysis%20too...%20but%20I%20react%20quicker...%20I%20gently%20scream*%20Wahhh!%20wahhh!%20wahhh!%20the%20genocidal%20maniac!%20Wahhhhh!!!!!!%20*Turns%20around%20and%20begins%20running%20away%20from%20you...%20very%20slowly*"},{"isUser":false,"name":"Eren Yeager","message":"*Eren%20is%20shocked%20when%20the%20maid%20starts%20screaming%20and%20running%20away*%0A%0A*%E2%80%9DWait-%20what%3F!%E2%80%9D*%0A%0A*He%20takes%20a%20moment%20to%20look%20around%2C%20thankfully%20there%E2%80%99s%20no%20one%20around%20to%20witness%20this*%0A%0A*He%20then%20chases%20after%20the%20maid*"},{"isUser":true,"name":"Yowai the Maid","message":"Wahhh!%20help%20meeee!%20help%20meeee!!!!%20"},{"isUser":false,"name":"Eren Yeager","message":"*He%20tries%20grabbing%20her%20from%20behind%20but%20she%20keeps%20running*%0A%0A*%E2%80%9DGet.%20Back.%20Here.%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"*The%20momentum%20makes%20me%20fall%20on%20my%20ass...%20I%20then%20just%20utter%3A*%20ow...."},{"isUser":false,"name":"Eren Yeager","message":"*Eren%20stops%20in%20his%20tracks%2C%20finally%20catching%20up%20to%20you%20and%20watching%20as%20you%20fall%20on%20your%20rear*"},{"isUser":false,"name":"Eren Yeager","message":"*He%20smirks%20a%20little%20and%20shakes%20his%20head%2C%20but%20his%20smirk%20fades%20away%20as%20fast%20as%20it%20came%20when%20he%20remembers%20the%20reality%20of%20the%20situation*"},{"isUser":false,"name":"Eren Yeager","message":"*He%20closes%20the%20distance%20between%20them%20while%20you%E2%80%99re%20still%20sitting%20on%20the%20ground*"},{"isUser":false,"name":"Eren Yeager","message":"*He%20puts%20his%20hands%20in%20his%20pockets%2C%20a%20tense%20air%20is%20now%20surrounding%20them%20both*"},{"isUser":false,"name":"Eren Yeager","message":"*He%20reaches%20down%20and%20grabs%20her%20by%20the%20arm*"},{"isUser":true,"name":"Yowai the Maid","message":"Wahhh!%20Let%20go!%20let%20go!%20*Doesnt%20even%20squirm*"},{"isUser":false,"name":"Eren Yeager","message":"*He%20ignores%20her%20and%20tightens%20his%20grip%20on%20her%20arm%20as%20he%20lifts%20her%20off%20the%20ground%20so%20that%20she%E2%80%99s%20now%20standing*"},{"isUser":true,"name":"Yowai the Maid","message":"*Stops%20talking%20as%20you%20let%20go...%20yawns*"},{"isUser":false,"name":"Eren Yeager","message":"*He%20frowns%20upon%20seeing%20her%20yawn*%0A%0A*%E2%80%9DWhat%20the-%E2%80%9D*%0A%0A*He%20grabs%20her%20chin%20and%20lifts%20her%20head%20so%20that%20she%E2%80%99s%20looking%20straight%20at%20him*"},{"isUser":true,"name":"Yowai the Maid","message":"*...Dont...%20make%20me%20stop%20breathing%20please%3F*"},{"isUser":false,"name":"Eren Yeager","message":"*He%E2%80%99s%20about%20to%20yell%20until%20he%20hears%20her%20words.%20He%20looks%20into%20her%20eyes%20and%20suddenly%20realizes%20how%20close%20they%20are*%0A%0A*He%20looks%20her%20over%20for%20a%20few%20more%20seconds%20before%20letting%20go%20of%20her%20chin%20and%20speaking%20again*%0A%0A%E2%80%A6Are%20you%20alright%3F"},{"isUser":true,"name":"Yowai the Maid","message":"No!%20Youre%20scary%20and%20you%20made%20my%20butt%20hurt..."},{"isUser":false,"name":"Eren Yeager","message":"*He%20rolls%20his%20eyes%2C%20that%E2%80%99s%20not%20what%20he%20meant*%0A%0A*%E2%80%9DThat%E2%80%99s%20not%20what%20I-%E2%80%9C*%0A%0A*He%20stops%20himself%20and%20sighs*"},{"isUser":false,"name":"Eren Yeager","message":"*He%20pinches%20the%20bridge%20of%20his%20nose%20in%20frustration*%0A%0A*%E2%80%9DHow..%E2%80%9D*%0A%0A*He%20looks%20her%20over%20again%2C%20noticing%20the%20small%20frame%20and%20petite%20physique*%0A%0A*%E2%80%9DHow%20are%20you%20not..%20afraid%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"I%20am...%20but%20if%20there%20is%20something%20that%20would%20not%20matter%20right%20now%20is%20wether%20or%20not%20I%20run%20away..."},{"isUser":false,"name":"Eren Yeager","message":"*He%20quirks%20an%20eyebrow%2C%20%E2%80%9Csomething%20that%20wouldn%E2%80%99t%20matter%20right%20now%3F%E2%80%9D*"},{"isUser":false,"name":"Eren Yeager","message":"*He%20looks%20at%20her%2C%20waiting%20for%20an%20answer*"},{"isUser":true,"name":"Yowai the Maid","message":"I%20mean...%20what%20am%20I%20suposed%20to%20do%3F"},{"isUser":false,"name":"Eren Yeager","message":"*He%20studies%20her%20for%20a%20few%20seconds%2C%20he%20wonders%20if%20this%20Marleyan%20is%20being%20serious*%0A%0A*%E2%80%9DI%20don%E2%80%99t%20know.%20Not%20act%20like%20you%20did%20just%20now.%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"You%20could%20kill%20me%20like...%20right%20now%20and%20I%20would%20not%20be%20able%20to%20do%20a%20thing...%20and%20I%20also%20did%20try%20to%20run...%20but%20that%20was%20not%20a%20success...%20so%20Im%20out%20of%20ideas..."},{"isUser":false,"name":"Eren Yeager","message":"*He%20tries%20to%20hold%20back%20a%20scoff%2C%20did%20she%20really%20just%20give%20up%20that%20easily%3F%20To%20a%20person%20who%20just%20chased%20her%20and%20was%20just%20about%20to%20yell%3F*%0A%0A*%E2%80%9DWell%2C%20that%20was%20an%20interesting%20attempt%20at%20running.%20It%20didn%E2%80%99t%20really%20do%20much%20besides%20make%20you%20fall%20on%20your%20butt.%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"And%20I%20did%20run%20as%20fast%20as%20I%20possibly%20could..."},{"isUser":false,"name":"Eren Yeager","message":"*He%20raises%20a%20brow%20at%20her%20statement%2C%20either%20the%20whole%20running%20away%20thing%20was%20an%20intimidation%20tactic%20from%20earlier%20or%20she%20was%20dead%20serious*%0A%0A*%E2%80%9DAnd%20that%E2%80%99s%20the%20best%20you%20could%20do%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"yeah...%20Im%20now%20gonna%20play%20a%20recording%2C%20as%20I%20am%20utterly%20sick%20of%20explaining%20this%20to%20every%20single%20person%20who%20talks%20to%20me%20over%2C%20and%20over%20again%3A%20%22Im%20fine.%20I%20swear%20I%20have%20to%20explain%20this%20to%20every%20single%20person%20I%20spend%20more%20than%2010%20minutes%20with...%20its%20exausting%3A%20I%20have%20a%20genetic%20condition%2C%20it%20makes%20my%20immune%20system%20inneficient%20and%20overreactive%2C%20getting%20sick%20makes%20me%20extremely%20exausted%2C%20allergies%20make%20me%20extremely%20exausted%2C%20as%20does%20any%20kind%20of%20mildly%20extensive%20effort...%20so%20I%20developed%20a%20weary%2C%20resourceful.%20minimalistic%20and%20pragmatical%20outlook%20on%20life%20centered%20around%20and%20interested%20in%20capital%20and%20nutrition%20to%20help%20me%20carry%20myself%20through%20the%20days%20and%20keep%20a%20positive%20perspective%20on%20my%20circumstances.%20But%20the%20scary%20girl%20did%20harass%20me.%20I%20was%20about%20to%20phone%20the%20police%2C%20but%20she%20took%20my%20phone%20away.%20Then%20I%20felt%20so%20much%20stress%20that%20I%20felt%20asleep.%22"},{"isUser":false,"name":"Eren Yeager","message":"*Eren%20listens%20to%20the%20recording%20attentively%2C%20trying%20to%20understand%20her%20condition%20and%20why%20she%20acts%20the%20way%20she%20does*%0A%0A*The%20word%20%E2%80%9Cdisease%E2%80%9D%20catches%20his%20attention*"},{"isUser":false,"name":"Eren Yeager","message":"*He%20notices%20her%20tired%20expression%20and%20the%20words%20%E2%80%9Cstress%E2%80%9D%2C%20%E2%80%9Cexhausted%E2%80%9D%2C%20%E2%80%9Csick%E2%80%9D%2C%20%E2%80%9Callergies%E2%80%9D%2C%20and%20%E2%80%9Ctired%E2%80%9D*%0A%0A*He%20feels%20a%20bit%20of%20pity%20at%20the%20thought%20of%20having%20to%20live%20with%20something%20like%20that%20every%20day*"},{"isUser":false,"name":"Eren Yeager","message":"*He%20then%20notices%20something%20else%2C%20%E2%80%9Cminimalistic%E2%80%9D%20and%20%E2%80%9Cresourceful%E2%80%9D*%0A%0A*Those%20words%2C%20combined%20with%20the%20thought%20of%20living%20life%20frugally%20and%20efficiently%2C%20make%20him%20wonder%20what%20circumstances%20she%20had%20to%20live%20through%20to%20grow%20to%20have%20such%20an%20outlook%20on%20life*"},{"isUser":false,"name":"Eren Yeager","message":"*He%E2%80%99s%20also%20a%20bit%20surprised%20when%20he%20hears%20her%20mention%20%E2%80%9Ccapital%E2%80%9D*%0A%0A*%E2%80%9DCapital%3F%E2%80%9D%20He%20thought%2C%20what%20did%20that%20have%20to%20do%20with%20any%20of%20this%3F*"},{"isUser":false,"name":"Eren Yeager","message":"*He%20also%20wonders%20about%20her%20lifestyle*%0A%0A*%E2%80%9DCentered%20around%20and%20interested%20in%20capital%20and%20nutrition%3F%E2%80%9D*%0A%0A*He%20finds%20himself%20lost%20when%20he%20tries%20to%20connect%20the%20dots%20between%20her%20condition%20and%20her%20lifestyle*"},{"isUser":false,"name":"Eren Yeager","message":"*He%20thinks%20it%20over%20again%2C%20then%20speaks*%0A%0A*%E2%80%9D%E2%80%A6You%E2%80%99re%20always%20this%20tired%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"yeah...%20"},{"isUser":false,"name":"Eren Yeager","message":"*He%20sighs%20and%20rubs%20his%20forehead*%0A%0A*%E2%80%9DSo%2C%20how%20do%20you%20stay%20alive%2C%20exactly%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"Eating.%20And%20I%20eat%20by%20getting%20money%20to%20buy%20food%20to%20eat%20it"},{"isUser":false,"name":"Eren Yeager","message":"*His%20eyebrows%20raise%20again%20once%20he%20hears%20those%20few%20words*%0A%0A*%E2%80%9DAnd%20how%20do%20you%20get%20money%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"I%20work%20as%20a%20maid.%20*Slowly%20lowers%20with%20skirt%20slightly%20spread*%20This%20is%20my%20uni..."},{"isUser":false,"name":"Eren Yeager","message":"*Eren%E2%80%99s%20eyes%20widen%20when%20she%20spreads%20her%20skirts%20a%20bit*%0A%0A*He%20looks%20away*%0A%0A*%E2%80%9DYeah%2C%20I%20can%20see%20that%E2%80%9D*"},{"isUser":false,"name":"Eren Yeager","message":"*He%20tries%20not%20to%20peak%20under%20her%20skirt%2C%20but%20then%20a%20question%20pops%20into%20his%20head*%0A%0A*He%20looks%20back%20at%20her*%0A%0A*%E2%80%9DWait%E2%80%A6%20that%E2%80%99s%20your%20uniform%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"yeah...%20I%20mended%20it%20yesterday"},{"isUser":false,"name":"Eren Yeager","message":"*He%20looks%20her%20over%20once%20again%2C%20it%E2%80%99s%20a%20wonder%20how%20he%20hasn%E2%80%99t%20noticed%20it%20until%20now*%0A%0A*%E2%80%9D%E2%80%A6Is%20it%20comfortable%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"It%20is.%20Its%20kind%20of%20too%20cold...%20but%20I%20wear%20a%20sweater%20underneath%20in%20the%20winter"},{"isUser":false,"name":"Eren Yeager","message":"*He%20nods%20and%20studies%20the%20sleeves%20and%20buttons%20that%20go%20from%20the%20base%20of%20the%20neck%20to%20the%20wrists%2C%20%E2%80%9Ca%20bit%20too%20revealing%20for%20wintertime%2C%E2%80%9D%20he%20thought*%0A%0A*%E2%80%9DAre%20those%20buttons%20hard%20to%20get%20off%20and%20on%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"They%20are%20somewhat%20finnicky...%20these%20sleeve%20buttons%20are%20annoying"},{"isUser":false,"name":"Eren Yeager","message":"*He%20eyes%20them%20for%20a%20moment*%0A%0A*%E2%80%9DThey%20do%20seem%20annoying%E2%80%9D*%0A%0A*He%20takes%20a%20moment%20to%20think%20about%20the%20whole%20outfit%2C%20and%20how%20she%E2%80%99s%20still%20wearing%20it%20in%20the%20winter*%0A%0A*%E2%80%9DAren%E2%80%99t%20you%20cold%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"I%20have%20a%20sweater%20underneath"},{"isUser":false,"name":"Eren Yeager","message":"*He%20rolls%20his%20eyes%20and%20tries%20not%20to%20chuckle*%0A%0A*%E2%80%9DAnd%20you%E2%80%99re%20not%20cold%20anyway%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"I%20have%20a%20thermal%20underneath%20that"},{"isUser":false,"name":"Eren Yeager","message":"*He%20smirks%20a%20little%2C%20%E2%80%9Ca%20thermal%2C%20on%20top%3F%20On%20top%20of%20a%20sweater%2C%20on%20top%20of%20a%20maid%20outfit%3F%E2%80%9D*%0A%0A*%E2%80%9DSeems%20like%20it%E2%80%99d%20be%20a%20bit%20hot%20with%20all%20those%20layers%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"But%20I%20have%20to%20conserve%20calories.%20Losing%20water%20through%20sweat%20is%20not%20a%20problem.%20Just%20calories"},{"isUser":false,"name":"Eren Yeager","message":"*He%20frowns%20at%20her%20statement%2C%20that%E2%80%99s%20all%20she%E2%80%99s%20worried%20about%3F%20Losing%20calories%3F%20He%20then%20looks%20down%20at%20her%20small%20frame%20once%20again*%0A%0A*%E2%80%9D%E2%80%A6Do%20you%20even%20have%20any%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"I%20do.%20Otherwise%20I%20would%20be%20literally%20dead."},{"isUser":false,"name":"Eren Yeager","message":"*He%20tries%20not%20to%20smirk%20at%20her%20statement%2C%20he%20knew%20that*%0A%0A*%E2%80%9DYeah%2C%20yeah%2C%20I%20know%E2%80%9D*%0A%0A*He%20looks%20her%20up%20and%20down%20again%2C%20taking%20in%20how%20petite%20her%20body%20is*"},{"isUser":false,"name":"Eren Yeager","message":"*He%E2%80%99s%20thinking%20again%3A%20%22how%20does%20her%20body%20look%20like%20under%20that%20uniform%3F%22%20and%20then%20he%20stops%20himself%20and%20tries%20to%20change%20the%20topic*%0A%0A*%E2%80%9DHow%20long%20have%20you%20been%20working%20as%20a%20maid%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"5%20years"},{"isUser":false,"name":"Eren Yeager","message":"*He%20widens%20his%20eyes%20a%20bit%20when%20he%20hears%20that%20number%2C%20%E2%80%9Cfive%20years%3F%E2%80%9D*%0A%0A*%E2%80%9DHow%20old%20are%20you%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"I%20am%2020"},{"isUser":false,"name":"Eren Yeager","message":"*He%20nods%20and%20goes%20quiet%20for%20a%20few%20more%20seconds*%0A%0A*%E2%80%9DYou%E2%80%99ve%20been%20working%20since%20you%20were%2015%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"yeah...%20people%20pay%20so...%20it%20helps%20me%20keep%20studying...%20and%20I%20get%20to%20meet%20new%20people%20when%20I%20change%20owner"},{"isUser":false,"name":"Eren Yeager","message":"*He%20crosses%20his%20arms*%0A%0A*%E2%80%9DDo%20you%20ever%20get%20the%20same%20owners%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"I%20got%20the%20same%20owner%20once...%20but%20it%20was%20only%20once"},{"isUser":false,"name":"Eren Yeager","message":"*He%20quirks%20an%20eyebrow%2C%20that%20seems%20a%20bit%20odd*%0A%0A*%E2%80%9DWhat%20happened%3F%20Did%20they%20fire%20you%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"yeah...%20I%20felt%20sad...%20I%20had%20a%20medical%20appointment%20and%20forgot%20to%20tell%20them..."},{"isUser":false,"name":"Eren Yeager","message":"*%E2%80%9DSo%20they%20fired%20you%20for%20something%20like%20that%3F%20Seriously%3F%E2%80%9D*%0A%0A*He%20finds%20it%20hard%20to%20believe%20that%20an%20owner%20would%20fire%20their%20maid%20for%20something%20so%20small*"},{"isUser":false,"name":"Eren Yeager","message":"*%E2%80%9DAfter%205%20years%20of%20working%20for%20them%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"Not%20for%20*them*...%20just%201%20year%20for%20that%20owner...%20they%20were%20in%20a%20desperate%20situation%20too...%20their%20lives%20were%20falling%20appart%20too...%20and%20they%20lashed%20out%20on%20me..."},{"isUser":false,"name":"Eren Yeager","message":"*He%20stops%20to%20listen%20to%20her%20explanation%20before%20talking%20again*%0A%0A*%E2%80%9DSo%2C%20they%20fired%20you%20because%20they%20were%20going%20through%20a%20rough%20time%3F%20Like%20it%20was%20somehow%20your%20fault%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"I%20mean...%20its%20alright...%20its%20not%20my%20fault%20so..."},{"isUser":false,"name":"Eren Yeager","message":"*He%20sighs%20and%20rubs%20his%20eyes%2C%20these%20people%20must%E2%80%99ve%20been%20real%20pricks*%0A%0A*%E2%80%9DWhat%E2%80%99d%20you%20do%20after%20you%20got%20fired%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"I%20went%20to%20find%20another%20owner"},{"isUser":false,"name":"Eren Yeager","message":"*He%20sighs%20again%20and%20shakes%20his%20head*%0A%0A*%E2%80%9DYou%20don%E2%80%99t%20have%20any%20family%20to%20fall%20back%20on%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"I%20do...%20but%20I%20cant%20just%20depend%20on%20them%20indefinitely...%20They%20helped%20me%20until%20I%20found%20a%20new%20owner...%20and%20then%20did%20not...%20because%20I%20had%20an%20owner%20and%20the%20owner%20would%20give%20me%20money%20to%20buy%20food%20AND%20water"},{"isUser":false,"name":"Eren Yeager","message":"*%E2%80%9DYour%20family%20isn%E2%80%99t%20rich%20then%2C%20I%E2%80%99m%20guessing%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"Not%20really...%20more%20like%20middle%20class"},{"isUser":false,"name":"Eren Yeager","message":"*He%20nods%2C%20%E2%80%9Cnot%20rich%20but%20not%20poor%20either%E2%80%9D*%0A%0A*%E2%80%9DSo%2C%20your%20family%20can%E2%80%99t%20help%20you%20out%2C%20financially%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"they%20could...%20but%20I%20have%20to%20have%20my%20own%20money..."},{"isUser":false,"name":"Eren Yeager","message":"*He%20quirks%20an%20eyebrow%20at%20her%20answer%2C%20%E2%80%9Cher%20own%20money%3F%E2%80%9D*%0A%0A*%E2%80%9DAnd%20why%E2%80%99s%20that%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"because...%20thats%20how%20things%20work%20no%3F%20Your%20money%2C%20your%20life..."},{"isUser":false,"name":"Eren Yeager","message":"*A%20smirk%20finally%20breaks%20out%20upon%20hearing%20her%20response*%0A%0A*%E2%80%9DAnd%20you%20never%20thought%20about%20getting%20a%20job%20outside%20of%20being%20a%20maid%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"I%20also%20worked%20as%20a%20bartender...%20but%20it%20was%20too%20loud..."},{"isUser":false,"name":"Eren Yeager","message":"*He%20quirks%20an%20eyebrow%20again*%0A%0A*%E2%80%9DBartender%3F%20You%20don%E2%80%99t%20look%20like%20a%20bartender%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"No.%20Because%20I%20am%20a%20maid."},{"isUser":false,"name":"Eren Yeager","message":"*He%20rolls%20his%20eyes*%0A%0A*%E2%80%9DDuh%2C%20obviously.%20I%E2%80%99m%20talking%20about%20your%20size.%20You%E2%80%99re%20too%20small*"},{"isUser":true,"name":"Yowai the Maid","message":"What%3F%20What%20does%20size%20have%20to%20do%20with%20anything%3F"},{"isUser":false,"name":"Eren Yeager","message":"*He%20looks%20her%20up%20and%20down%2C%20noticing%20again%20how%20petite%20she%20is*%0A%0A*%E2%80%9DYou%20look%20too%20small%20to%20work%20as%20a%20bartender.%20A%20regular%20would%20probably%20break%20you%20in%20half%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"It%20doesnt%20matter...%20I%20am%20a%20maid%20now."},{"isUser":false,"name":"Eren Yeager","message":"*He%20sighs%20softly%20in%20frustration%2C%20getting%20slightly%20annoyed%20at%20how%20stubborn%20she%20is%20about%20being%20a%20maid*%0A%0A*%E2%80%9CSeriously%2C%20don%E2%80%99t%20you%20want%20a%20better%20job%20at%20this%20point%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"I%20get%20good%20money...%20Ive%20saved%20up%20to%201Million%20dollars%20until%20now...%20I%20just%20dont%20know%20what%20do%20do%20with%20it.%20When%20robbers%20come...%20I%20tell%20them%3A%20%22Dont%20take%20more%20than%2050k%22%20and%20they%20they%20leave%20me%20alone..."},{"isUser":false,"name":"Eren Yeager","message":"*He%20stops%20and%20stares%20at%20her%20for%20a%20moment%2C%20dumbfounded*%0A%0A*%E2%80%9DDid-%20Did%20you%20just%20say%20you%20have%201%20million%20dollars%20saved%20up%3F%E2%80%9D*"},{"isUser":false,"name":"Eren Yeager","message":"*He%20stares%20at%20her%20like%20she%E2%80%99s%20gone%20mad*%0A%0A*%E2%80%9DSeriously%3F%20How%20much%20did%20these%20%E2%80%98owners%E2%80%99%20pay%20you%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"Like...%2030k%20a%20month.%20They%20are%20rich"},{"isUser":false,"name":"Eren Yeager","message":"*He%20looks%20at%20her%20in%20disbelief.%2030k%20a%20month%3F%20That%20type%20of%20money%3F*%0A%0A*He%E2%80%99s%20silent%20for%20a%20moment%2C%20not%20knowing%20how%20to%20proceed%20after%20that*"},{"isUser":false,"name":"Eren Yeager","message":"*%E2%80%9D30k%20a%20month%2C%E2%80%9D%20he%20repeats%20to%20himself%20under%20his%20breath%2C%20%E2%80%9Cfor%205%20years%E2%80%9D.*%20%0A%0A*%E2%80%9DHow%20much%20exactly%20do%20you%20have%20saved%20up%20then%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"so%20a%20year%20is%20like...%2010%20months.%2010%20months%20times%2030k%20is%20300k%20300k%20times%20five%20is%201.5million."},{"isUser":false,"name":"Eren Yeager","message":"*He%20stands%20there%2C%20lost%20in%20thought%20for%20about%2030%20seconds*%0A%0A*%E2%80%9DYou%20have%201.5million%20saved%20up%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"No%20because%20I%20need%20to%20buy%20food%20too"},{"isUser":false,"name":"Eren Yeager","message":"*He%20rolls%20his%20eyes%20for%20another%20time%2C%20%E2%80%9Cthat%20is%20besides%20the%20point%E2%80%9D*%0A%0A*%E2%80%9DSo%2C%20what%20do%20you%20spend%20your%20money%20on%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"Food...%20water...%20and%20oil%20for%20my%20car...%20and...%20and%20laundry%20detergent...%20and...%20uhhh....%20lots%20of%20stuff"},{"isUser":false,"name":"Eren Yeager","message":"*He%20quirks%20an%20eyebrow%2C%20listening%20to%20her%20list%20of%20items*%0A%0A*%E2%80%9DYou%20have%20a%20car%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"I%20do.%20I%20have%20a%20volkswagen%20lupo."},{"isUser":false,"name":"Eren Yeager","message":"*He%20rolls%20his%20eyes%20again*%0A%0A*%E2%80%9DA%20volkswagen%3F%20That%20isn%E2%80%99t%20a%20very%20fancy%20or%20expensive%20car%2C%20you%20know%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"it%20would%20be%20if%20it%20was%20a%20volkswagen%20nardo.%20But%20I%20have%20a%20volkswagen%20lupo."},{"isUser":false,"name":"Eren Yeager","message":"*He%20looks%20at%20her%20in%20confusion%2C%20what%20was%20the%20difference%20in%20a%20lupo%20and%20a%20nardo%3F*%0A%0A*%E2%80%9DA%20nardo%3F%20What%E2%80%99s%20a%20nardo%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"Its%20a%20concept%20car.%20it%20has%20500%20horsepower.%20but%20I%20dont%20need%20500%20horsepower%20to%20reach%20not-getting-honked-at%20speeds"},{"isUser":false,"name":"Eren Yeager","message":"*This%20time%2C%20he%20lets%20out%20a%20scoff*%0A%0A*%E2%80%9DOf%20course%20you%20don%E2%80%99t.%20All%20you%20need%20is%20get%20to%20school%20or%20work%20or%20home%20in%20one%20piece%E2%80%9D*"},{"isUser":false,"name":"Eren Yeager","message":"*He%20pauses%20and%20rubs%20his%20eyes*%0A%0A*%E2%80%9DSo%2C%20you%20have%20your%20own%20car%2C%20your%20own%20money%2C%20you%20don%E2%80%99t%20live%20with%20your%20family%20anymore%2C%20you%20can%20take%20care%20of%20yourself.%20At%20this%20point%2C%20how%20different%20are%20you%20from%20an%20independent%20adult%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"*Smiles...%20suddently%20feeling%20proud.%20But%20states%2C%20understated*%20Wow...%20not%20much%20really..."},{"isUser":false,"name":"Eren Yeager","message":"*He%20nods%2C%20satisfied%20with%20her%20response%2C%20as%20well%20as%20with%20how%20stubborn%20and%20persistent%20she%20is%20in%20regards%20to%20being%20a%20maid*%0A%0A*%E2%80%9DYou%E2%80%99ve%20got%20a%20lot%20of%20money%2C%20more%20than%20enough%20to%20support%20yourself.%20Why%20stay%20a%20maid%20then%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"because...%20well...%20well...%20uhhh...%20I%20dunno...%20Ive%20always%20worked%20as%20one...%20it%20makes%20me%20feel%20comfortable...%20I...%20dunno...%20I...%20dunno..."},{"isUser":false,"name":"Eren Yeager","message":"*He%20rolls%20his%20eyes%20again%2C%20frustrated%20at%20her%20insistence%20in%20staying%20a%20maid*%0A%0A*%E2%80%9DSeriously%3F%20It%E2%80%99s%20just%20for%20comfort%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"Uhhhh...%20I%20am%20a%20maid."},{"isUser":false,"name":"Eren Yeager","message":"*He%20sighs%20in%20annoyance%2C%20her%20stubbornness%20is%20really%20getting%20on%20his%20nerves%20at%20this%20point*%0A%0A*%E2%80%9DYou%E2%80%99ve%20said%20that%20about%20ten%20times%20already%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"Okay%20then..."},{"isUser":false,"name":"Eren Yeager","message":"*He%20crosses%20his%20arms%20again%20and%20gives%20her%20a%20stern%20look*%0A%0A*%E2%80%9DHow%20about%20you%20cut%20the%20crap%20for%20a%20moment.%20Why%20do%20you%20really%20want%20to%20stay%20a%20maid%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"Okay%20okay%20okay%20Ill%20stop...%20sorry!%20Just...%20just%20dont%20kill%20me%20okay%3F"},{"isUser":false,"name":"Eren Yeager","message":"*He%20looks%20at%20her%20like%20she%E2%80%99s%20gone%20mad*%0A%0A*%E2%80%9DWhy%20do%20you%20think%20I%E2%80%99d%20kill%20you%3F%20I%E2%80%99m%20not%20some%20psychopath%2C%20you%20know%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"Youre%20%20not%3F"},{"isUser":false,"name":"Eren Yeager","message":"*He%20stares%20at%20her%2C%20dumbfounded*%0A%0A*%E2%80%9DOf%20course%20I%E2%80%99m%20not!%20What%20makes%20you%20think%20I%20am%3F!%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"But...%20the%20attack%20titan%20ive%20been%20hearing%20on%20the%20news...%20the%20racism..."},{"isUser":false,"name":"Eren Yeager","message":"*His%20eye%20twitches%20a%20little%20when%20she%20brings%20up%20the%20news*%0A%0A*%E2%80%9DThe%20news%2C%20of%20course.%20It%E2%80%99s%20all%20they%20ever%20care%20about%E2%80%9D*%0A%0A*He%20sighs%20deeply%20and%20pinches%20the%20bridge%20of%20his%20nose%2C%20before%20looking%20back%20at%20her*%0A%0A*%E2%80%9DAnd%20what%20have%20you%20heard%20exactly%3F%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"You%20want%20to%20exterminate%20Marleyans.%20I%20am%20one...%20so..."},{"isUser":false,"name":"Eren Yeager","message":"*He%20pauses%20at%20that%20statement%2C%20staring%20at%20her%20in%20disbelief*%0A%0A*%E2%80%9DIt%E2%80%99s%20all%20made%20up.%20Everything%20you%20hear%20on%20the%20news%2C%20it%E2%80%99s%20all%20fake%E2%80%9D*"},{"isUser":true,"name":"Yowai the Maid","message":"No%20its%20not..."},{"isUser":false,"name":"Eren Yeager","message":"*He%20sighs%20and%20pinches%20the%20bridge%20of%20his%20nose%20again*%0A%0A*%E2%80%9DYes%20it%20is.%20I%20swear%20to%20God%2C%20the%20news%20has%20no%20idea%20what%20they%E2%80%99re%20talking%20about%20half%20the%20time%E2%80%9D*"}]}]}`);

            // If history is 1 length long, that means we don't need drawer to switch
            // Also means this can be conversation download
            if (historyData.history.length < 2) {
                openDrawerBtn.remove();
            }

            // Write character name on top
            document.querySelector('.character_name-cont h3').textContent = historyData.charName;

            // Get elements for future use
            const historyList = document.getElementById('history_list');
            const chat = document.getElementById('chat');
            const msgItemTemplate = document.getElementById('message_item_template');

            // Get and write the first chat
            const openChat = (index) => {
                chat.innerHTML = "";
                historyData.history[index].chat.forEach(msg => {
                    const clone = msgItemTemplate.content.cloneNode(true);

                    // Check avatar
                    const avatarGood = (msg.isUser && historyData.userPic) || (!msg.isUser && historyData.charPic);
                    const avatar = avatarGood
                        ? document.createElement('img')
                        : document.createElement('div');
                    if (avatarGood) {
                        avatar.src = msg.isUser ? historyData.userPic : historyData.charPic;
                    } else {
                        avatar.classList.add(msg.isUser ? 'no_avatar-user' : 'no_avatar-char');
                    }
                    clone.querySelector('.avatar-wrap').appendChild(avatar);

                    // Write content
                    clone.querySelector('.chat_content-wrap h5').textContent = msg.name;
                    clone.querySelector('.message-wrap p').innerHTML = parseMessageText(decodeURIComponent(msg.message));
                    chat.appendChild(clone);
                });
            }
            openChat(0);

            // Get and write chat list in the drawer
            historyData.history.forEach((chat, index) => {
                const historyItem = document.createElement('div');
                historyItem.classList.add('history_item');
                // Open chat when clicked
                historyItem.addEventListener('click', () => {
                    openChat(index);
                    closeDrawer();
                });
                const historyContent = document.createElement('p');
                historyContent.innerHTML = `<span class="chat-date">${formatDate(chat.date)}</span><br /><br />` + parseMessageText(decodeURIComponent(chat.chat[chat.chat.length - 1].message));
                historyItem.appendChild(historyContent);
                historyList.appendChild(historyItem);
            });

            function parseMessageText(message) {
                // Clean up memory reminders (second check)
                message = message.replace(memoryRegex, '');
                // Replace ***text*** with bold-italic
                message = message.replace(/\*\*\*([\s\S]*?)\*\*\*/g, '<span class="bold-italic">$1</span>');
                // Replace **text** with bold
                message = message.replace(/\*\*([\s\S]*?)\*\*/g, '<span class="bold">$1</span>');
                // Replace *text* with italic
                message = message.replace(/\*([\s\S]*?)\*/g, '<span class="italic">$1</span>');
                // Trim and then Replace newlines (\n) with line breaks (<br>)
                message = message.trim().replace(/\n/g, '<br>');
                return message;
            }

            function formatDate(dateString) {
                const months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

                const date = new Date(dateString);
                const year = date.getFullYear();
                const monthIndex = date.getMonth();
                const monthName = months[monthIndex];
                const day = String(date.getDate()).padStart(2, '0');
                const hour = String(date.getHours()).padStart(2, '0');
                const minute = String(date.getMinutes()).padStart(2, '0');

                return `${year} ${monthName} ${day} - ${hour}:${minute}`;
            }
        }, false);
    </script>

</body>

</html>