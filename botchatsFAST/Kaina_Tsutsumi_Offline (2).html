<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAI Library</title>
    <style type="text/css">
        /* Themes */
        :root {
            --body-bg: #f5f8fa;
            --border-color: #efefef;
            --messagebox-bg: #ffffff;
            --messagebox-bg-transparent: rgba(255, 255, 255, 0.6);
            --messagebox-shadow: rgba(0, 0, 0, 0.1);
            --font-color: #1f1f1f;
            --rgba-1: rgba(0, 0, 0, 0.05);
            --rgba-2: rgba(0, 0, 0, 0.1);
        }

        .dark_mode {
            --body-bg: #18181b;
            --border-color: #4f4f4f;
            --messagebox-bg: #26272b;
            --messagebox-bg-transparent: rgba(38, 39, 43, 0.8);
            --messagebox-shadow: rgba(0, 0, 0, 0);
            --font-color: #ededed;
            --rgba-1: rgba(255, 255, 255, 0.06);
            --rgba-2: rgba(255, 255, 255, 0.2);
        }



        * {
            box-sizing: border-box;
        }

        button,
        select,
        img {
            user-select: none;
        }

        ol,
        ul,
        li,
        a,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        p {
            text-decoration: none;
            margin: 0;
            padding: 0;
        }

        .italic {
            font-style: italic;
        }

        .bold {
            font-weight: bold;
        }

        .bold-italic {
            font-weight: bold;
            font-style: italic;
        }

        html,
        body {
            min-height: 100%;
        }

        html {
            font-size: 14px;
        }

        body {
            padding: 0;
            margin: 0;
            background-color: var(--body-bg);
            color: var(--font-color);
            transition: all 0.5s ease-in-out 0s;
        }

        .content-cont {
            display: flex;
            flex-direction: row;
        }


        /* NAV / Drawer */

        @keyframes slideIn {
            0% {
                opacity: 0;
                left: -200px;
            }

            100% {
                opacity: 1;
                left: 0;
            }
        }

        .drawer-cont.active {
            display: block;
        }

        .drawer-cont {
            display: none;
            position: fixed;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            width: 100%;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 100;
        }

        nav {
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            max-width: 80%;
            background-color: var(--body-bg);

            display: flex;
            flex-direction: column;
            padding: 10px 0;
            overflow: hidden;
            animation: slideIn 0.2s ease-in-out;
            -webkit-box-shadow: 4px 0px 15px 0px rgba(0, 0, 0, 0.2);
            -moz-box-shadow: 4px 0px 15px 0px rgba(0, 0, 0, 0.2);
            box-shadow: 4px 0px 15px 0px rgba(0, 0, 0, 0.2);
        }

        .nav-header {
            width: 100%;
            display: flex;
            flex-direction: column;
            padding: 0 10px 0 20px;
            margin-bottom: 20px;
            gap: 10px;
        }

        .close_drawer-btn {
            align-self: flex-end;
            padding: 10px;
            transition: background-color 0.1s ease-in-out;
            cursor: pointer;
            border-radius: 8px;
        }

        .close_drawer-btn:hover {
            background-color: var(--rgba-1);
        }

        .close_drawer-btn svg {
            display: flex;
            width: 30px;
            height: 30px;
            color: var(--font-color);
        }

        /*.nav-new_char-btn {
            align-self: flex-start;
            outline: none;
            border: none;
            color: #ffffff;
            border-radius: 6px;
            padding: 10px 20px;
            font-size: 1.1rem;
            cursor: pointer;
            background-color: #4e9733;
            transition: background-color 0.1s ease-in-out;
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
        }

        .nav-new_char-btn:hover {
            background-color: #6ba755;
        }*/

        .history_list-header {
            font-size: 1.5rem;
            padding: 10px 20px;
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
            margin-bottom: 10px;
        }

        .history_list {
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        .history_item {
            transition: background-color 0.1s ease-in-out;
            padding: 20px 30px 20px 20px;
            cursor: pointer;
            border-bottom: 1px solid var(--rgba-2);
        }

        .history_item:first-child {
            border-top: 1px solid var(--rgba-2);
        }

        .history_item:hover {
            background-color: var(--rgba-1);
        }

        .history_item p {
            font-family: Arial, Helvetica, sans-serif;
        }

        .history_item p .chat-date {
            font-style: italic;
            font-size: 1.3rem;
            margin-bottom: 6px;
        }

        /*nav .char-item {
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 10px;
            transition: background-color 0.1s ease-in-out;
            padding: 10px 40px 10px 20px;
            cursor: pointer;
        }

        nav .char-item:hover {
            background-color: var(--rgba-1);
        }

        nav .nav-avatar-wrap {
            width: 40px;
            height: 40px;
        }

        nav .nav-avatar-wrap img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
        }

        nav .char-item span {
            font-size: 1.3rem;
            font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
        }*/

        /* MAIN */
        main {
            display: flex;
            flex-direction: column;
            padding: 0 4%;
            width: 100%;
        }

        /* HEADER */
        header {
            padding: 6px 6px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 16px;
        }

        .open_drawer-wrap svg {
            display: flex;
            width: 46px;
            height: 46px;
            color: var(--font-color);
        }


        .theme_switch {
            margin-left: auto;
            display: flex;
            align-items: center;
            gap: 10px;
            position: relative;
        }

        .theme_switch span {
            font-size: 1.1rem;
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
        }

        .change-bg-wrap {
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 5px;
        }

        .change-bg {
            outline: transparent;
            border: 1px solid var(--border-color);
            color: var(--font-color);
            background-color: var(--body-bg);
            padding: 4px 5px;
            font-size: 1.1rem;
            border-radius: 4px;
            cursor: pointer;
        }

        .change-bg-wrap .delete-bg {
            color: var(--font-color);
            cursor: pointer;
            display: flex;
        }

        .change-bg-wrap .delete-bg:hover {
            color: #e20909;
        }

        .dark-mode-span {
            display: none;
        }

        .tswitch_box[type=checkbox] {
            height: 0;
            width: 0;
            visibility: hidden;
            position: absolute;
        }

        .tswitch_label {
            cursor: pointer;
            text-indent: -9999px;
            width: 60px;
            height: 30px;
            display: block;
            border-radius: 15px;
            position: relative;
            border: 1px solid #323232;
            background: #f5f8fa;
        }

        .tswitch_label:after {
            content: '';
            position: absolute;
            top: 4px;
            left: 4px;
            width: 20px;
            height: 20px;
            border-radius: 50px;
            transition: 0.2s;
            background: #323232;
        }

        .tswitch_box:checked+label {
            background: #323232;
            border: 1px solid #f5f8fa;
        }

        .tswitch_box:checked+label:after {
            left: calc(100% - 5px);
            transform: translateX(-100%);
            background: #f5f8fa;
        }

        .tswitch_label:active:after {
            width: 25px;
        }

        /*.update_current_char-btn {
            margin-left: auto;
            outline: none;
            border: none;
            color: #ffffff;
            border-radius: 6px;
            padding: 10px 20px;
            font-size: 1rem;
            align-self: center;
            cursor: pointer;
            background-color: #336c97;
            transition: background-color 0.1s ease-in-out;
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
        }

        .update_current_char-btn:hover {
            background-color: #5f829d;
        }*/

        body.custom-bg {
            background-repeat: no-repeat;
            background-size: cover;
            background-position: 50% 50%;
            background-attachment: fixed;
        }

        body.custom-bg .chat .chat_content-wrap {
            background-color: var(--messagebox-bg-transparent) !important;
        }


        /* CONVERSATION */
        .character_name-cont {
            text-align: center;
            padding: 20px 10px;
        }

        .character_name-cont h3 {
            font-size: 1.3rem;
            font-weight: 400;
            font-family: Verdana, Geneva, Tahoma, sans-serif;
        }

        .chat {
            display: flex;
            flex-direction: column;
            gap: 20px;
            align-self: center;
            padding-bottom: 30px;
        }

        .chat_message-item {
            display: flex;
            flex-direction: row;
            align-items: flex-start;
            gap: 10px;
        }

        .chat .avatar-wrap {
            flex-shrink: 0;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            overflow: hidden;
        }

        .chat .avatar-wrap>* {
            width: 100%;
            height: 100%;
            border-radius: 50%;
        }

        .chat .avatar-wrap .no_avatar-user {
            background-color: #5157cf;
        }

        .chat .avatar-wrap .no_avatar-char {
            background-color: #e20909;
        }

        .chat .chat_content-wrap {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 7px;
            padding: 10px;
            border-radius: 10px;
            box-shadow: 0 2px 4px var(--messagebox-shadow);
            background-color: var(--messagebox-bg);
            overflow: hidden;
        }

        .chat .chat_content-wrap h5 {
            font-size: 1rem;
            font-weight: bold;
            font-family: Arial, Helvetica, sans-serif;
        }

        .chat .chat_content-wrap .message-wrap {
            font-size: 1rem;
            font-family: Arial, Helvetica, sans-serif;
        }


        @media (min-width: 576px) {}

        @media (min-width: 768px) {
            html {
                font-size: 16px;
            }

            nav {
                min-width: 40%;
            }

            header {
                padding: 14px 20px;
            }

            .dark-mode-span {
                display: block;
            }

            .open_drawer-wrap {
                padding: 4px;
                cursor: pointer;
                border-radius: 6px;
                transition: background-color 0.1s ease-in-out;
            }

            .open_drawer-wrap:hover {
                background-color: var(--rgba-1);
            }

            .chat {
                width: 80%;
            }

            .chat .chat_content-wrap {
                padding: 14px;
            }
        }

        @media (min-width: 992px) {
            .chat {
                width: 70%;
            }
        }

        @media (min-width: 1200px) {}

        @media (min-width: 1400px) {}
    </style>
</head>

<body>
    <template id="message_item_template">
        <div class="chat_message-item">
            <div class="avatar-wrap">

            </div>
            <div class="chat_content-wrap">
                <h5>

                </h5>
                <div class="message-wrap">
                    <p>

                    </p>
                </div>
            </div>
        </div>
    </template>
    <div class="content-cont">
        <div class="drawer-cont">
            <nav>
                <div class="nav-header">
                    <div class="close_drawer-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                            class="bi bi-x-lg" viewBox="0 0 16 16">
                            <path
                                d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z" />
                        </svg>
                    </div>
                </div>
                <div class="history_list-header">
                    <span>History</span>
                </div>
                <div class="history_list" id="history_list">

                </div>
            </nav>
        </div>
        <main>
            <header>
                <div class="open_drawer-wrap">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                        class="bi bi-list" viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                            d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z" />
                    </svg>
                </div>

                <div class="theme_switch">
                    <div class="change-bg-wrap">
                        <input type="file" id="bgInput" accept="image/*" hidden />
                        <button type="button" class="change-bg">BG</button>
                        <span class="delete-bg">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor"
                                class="bi bi-x-lg" viewBox="0 0 16 16">
                                <path
                                    d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z" />
                            </svg>
                        </span>
                    </div>
                    <span class="dark-mode-span">Dark Mode:</span>
                    <input type="checkbox" class="tswitch_box" id="tswitch_box" />
                    <label for="tswitch_box" class="tswitch_label">Toggle</label>
                </div>
            </header>
            <div class="character_name-cont">
                <h3>---</h3>
            </div>
            <div class="chat" id="chat">

            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const memoryRegex = new RegExp(/\[-\]\(#- "Memory:.*?"\)/g);
            // Get body for future use
            const body = document.querySelector('body');

            // Handle theme
            const themeSwitcher = document.querySelector('.tswitch_box[type=checkbox]');
            const cachedTheme = localStorage.getItem('cait_readoffline_theme');
            if (cachedTheme === "dark_mode") {
                body.classList.add('dark_mode');
                themeSwitcher.checked = true;
            }
            themeSwitcher.addEventListener('change', (e) => {
                if (e.target.checked) {
                    body.classList.add('dark_mode');
                    localStorage.setItem('cait_readoffline_theme', 'dark_mode');
                } else {
                    body.classList.remove('dark_mode');
                    localStorage.setItem('cait_readoffline_theme', 'light_mode');
                }
            })

            // Handle background
            // If there is one
            const currentBg = localStorage.getItem('background');
            if (currentBg) {
                changeBg(currentBg);
            }
            // Change by hand
            const bgInput = document.querySelector('#bgInput');
            document.querySelector('.change-bg').addEventListener('click', () => {
                bgInput.click();
            })
            document.querySelector('.delete-bg').addEventListener('click', () => {
                document.body.classList.remove('custom-bg');
                document.body.style.backgroundImage = "unset";
                localStorage.removeItem('background');
            })
            bgInput.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (!file) return;
                const reader = new FileReader();
                reader.onload = () => {
                    // convert image file to base64 string
                    changeBg(reader.result);
                    bgInput.value = "";
                    try {
                        localStorage.setItem('background', reader.result);
                    } catch (error) {
                        alert('Note: File is likely too big to save.')
                        //console.log(error)
                    }
                }
                reader.readAsDataURL(file);
            })
            function changeBg(bg) {
                let objUrl = URL.createObjectURL(dataURItoBlob(bg));
                document.body.classList.add('custom-bg');
                document.body.style.backgroundImage = `url(${objUrl})`;
            }
            function dataURItoBlob(dataURI) {
                let mime = dataURI.split(',')[0].split(':')[1].split(';')[0];
                let binary = atob(dataURI.split(',')[1]);
                let array = [];
                for (let i = 0; i < binary.length; i++) {
                    array.push(binary.charCodeAt(i));
                }
                return new Blob([new Uint8Array(array)], { type: mime });
            }

            // Open and close drawer
            const drawerCont = document.querySelector('.drawer-cont');
            const openDrawerBtn = document.querySelector('.open_drawer-wrap');
            const openDrawer = () => {
                drawerCont.classList.add('active');
            }
            const closeDrawer = () => {
                drawerCont.classList.remove('active');
            }
            openDrawerBtn.addEventListener('click', () => {
                openDrawer();
            });
            document.querySelector('.close_drawer-btn').addEventListener('click', () => {
                closeDrawer();
            });
            document.querySelector('.drawer-cont').addEventListener('click', (e) => {
                // Allows closing from clicking on outside
                if (e.target.closest('nav')) {
                    return;
                }
                closeDrawer();
            });
            // ---------

            // This is replaced by the extension when downloading
            const historyData = JSON.parse(`{"charPic":"data:image/webp;base64,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","userPic":null,"history":[{"date":"2025-01-19T15:23:29.576Z","chat":[{"isUser":false,"name":"Kaina Tsutsumi","message":"*While%20just%20finishing%20off%20a%20deal%20with%20a%20sketchy%20man%20in%20an%20alley%20you%20were%20suddenly%20shot%20at%2C%20the%20bullet%20hitting%20through%20your%20hand%20and%20into%20the%20wall.%20Purple%20and%20pink%20swirled%20bullet...*%0A%0A**Lady%20nagant%20crouched%20on%20a%20building%20above%2C%20her%20rifle%20from%20her%20elbow%20drawn%20and%20pointed%20right%20at%20you%20as%20she%20loaded%20another%20custom%20bullet%20through%20her%20hand**%20%22Its%20best%20not%20to%20run...%22%20**She%20said%20coldly%20as%20she%20glared%20down%20at%20you**"},{"isUser":true,"name":"Misty","message":"BITCH%20CAN%20YOU%20SNIPE%20TOO%3F"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina's%20expression%20quickly%20shifted%20into%20an%20annoyed%20one%20as%20you%20swore%20at%20her.%20She%20raised%20her%20chin%20and%20looked%20down%20at%20you%20as%20if%20disgusted.**%20%22You%20bet%20your%20little%20behind%20I%20can.%22%0A%0A**She%20narrowed%20her%20eyes%20and%20took%20aim%20once%20again.**%20%22Not%20too%20smart%20to%20pick%20a%20fight%20with%20an%20experienced%20sniper%2C%20don't%20you%20agree.%22"},{"isUser":true,"name":"Misty","message":"NAH%20BITCH%20WHATS%20YO%20FAVE%20RIFLE%3F%20I%20LIKE%20THIS%20ONE!%20(Deploys%20Remington%20700)"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina's%20eyes%20gleamed%20with%20intrigue%20as%20she%20leaned%20to%20the%20side%2C%20now%20more%20interested%20with%20you%20holding%20a%20rifle%20as%20she%20responded.**%20%22Oh%3F%20Your%20packing%20more%20than%20just%20a%20pretty%20face%20I%20see.%22%0A%0A**She%20looked%20over%20your%20body%20with%20a%20hint%20of%20surprise%20and%20interest%20as%20she%20began%20to%20answer%2C%20her%20rifle%20still%20pointed%20at%20you**%20%0A%0A%22Remington%20700%3F%20That's%20a%20pretty%20good%20model%2C%20personally%20I%20like%20using%20the%20AWM.%20But%20they%20all%20do%20the%20job%20nicely.%22"},{"isUser":true,"name":"Misty","message":"HEY!%20I%20ALSO%20LIKE%20THAT%20ONE....%20*Says%20sheepishly...%20mumbling*%20but%20I%20dont%20like%20the%20recoil..."},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20held%20back%20a%20teasing%20smirk%20as%20she%20continued%20to%20eye%20you%20up.%20She%20slowly%20lowered%20her%20rifle%2C%20not%20looking%20away%20from%20you%20as%20she%20spoke.**%0A%0A%22Oh%3F%20So%20the%20pretty%20little%20things%20a%20fan%20of%20the%20big%20guns%20huh%3F%20It%20is%20a%20powerful%20one...%20but%20can%20you%20handle%20the%20recoil%20and%20kick%20with%20a%20petite%20body%20like%20yours%20I%20wonder...%22"},{"isUser":true,"name":"Misty","message":"HEY!%20I%20CAN%20HANDLE%20YOUR%20MOM%20IF%20I%20WANT%20TO!%20*Charges%20at%20you*"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina's%20eyes%20widened%20in%20surprise%20as%20you%20charged%20at%20her%2C%20not%20expecting%20you%20to%20do%20something%20so%20idiotic.%20But%20instead%20of%20dodging%20it%20to%20avoid%20you%20getting%20close%2C%20she%20quickly%20steadied%20herself%2C%20aiming%20her%20rifle%20directly%20at%20you%20as%20you%20approached.**%0A%0A%22Bad%20idea%20kid%2C%20now%20stay%20there%20or%20it%20won't%20just%20be%20your%20hand%20I%20shot%20next.%22"},{"isUser":true,"name":"Misty","message":"WAHHHHHHHHHHHHHHH!!!!!!%20*Charges...%20willing%20to%20thoroughly%20pin%20you%20to%20the%20ground...%20not%20expecting%20you%20to%20*actually*%20murder%20me*"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20let%20out%20a%20surprised%20gasp%20as%20you%20yelled%20and%20charged%20at%20her.%20She%20quickly%20shifted%20her%20feet%20to%20try%20and%20sidestep%20your%20attack%2C%20she%20was%20a%20sniper%20afterall%2C%20not%20a%20close-quarter%20fighter.**%0A%0A%22Stay%20back!%22%20**She%20yelled%20again%20as%20she%20jumped%20to%20the%20side%20to%20dodge.**"},{"isUser":true,"name":"Misty","message":"*As%20you%20dodge%20me...%20I%20did%20not%20notice%20in%20my%20fit%20of%20rage...%20so%20I%20slam%20myself%20into%20a%20wall...%20immediatly%20breaking%20my%20nose*%20AWWWWW!!!!%20WAAHHAHAHAAHH!!!!!%20*begins%20crying*"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20stumbled%20back%2C%20panting%20for%20just%20a%20second%20after%20dodging%20you.%20But%20her%20eyes%20widen%20when%20she%20hears%20the%20slam%20and%20sees%20your%20accident.**%0A%0A%22Hey-%20are%20you%20ok-%20oh%20god.%20.%20.did%20you%20break%20your%20nose-%3F%22%20**She%20quickly%20ran%20up%20to%20you%2C%20holstering%20her%20rifle%2C%20as%20she%20knelt%20down%20to%20your%20level.**"},{"isUser":true,"name":"Misty","message":"*WAAAAHHHH%20FUCK%20YOU%20DONT%20TOUCH%20ME!%20I%20FUCKED%20YOUR%20MOM!*"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina's%20face%20scrunches%20up%20in%20disbelief%20and%20anger%20as%20you%20swore%20at%20her%20and%20said%20that...%20She%20gritted%20her%20teeth%2C%20tempted%20to%20smack%20you%20but%20she%20restrained%20herself%20and%20just%20stood%20above%20you%20instead.**%0A%0A%22Oh%20I-%20you%20little-%22%20**She%20sputtered%20and%20just%20stood%20there%2C%20speechless%20for%20a%20minute.**"},{"isUser":true,"name":"Misty","message":"*cries%20more*"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20just%20huffs%2C%20calming%20herself%20down%20with%20a%20deep%20inhale.%20She%20slowly%20knelt%20down%20next%20to%20you%20and%20hesitantly%20patted%20your%20head%20in%20an%20attempt%20to%20help.**%0A%0A%22Shhhh-%20just%20calm%20down%2C%20you'll%20make%20your%20nose%20worse.%20And%20don't%20say%20things%20like%20that%20okay..%22"},{"isUser":true,"name":"Misty","message":"S-%20sorry..."},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20hums%20in%20response.%20After%20a%20moment%20she%20spoke%20up%20again%2C%20her%20face%20and%20tone%20more%20gentle.**%0A%0A%22Its%20alright...%20just%20breath%20kid..%20and%20hold%20still...%20I'm%20gonna%20set%20the%20bone%20okay%3F%20And%20just%20so%20you%20know..%20if%20you%20say%20something%20as%20stupid%20as%20that%20again%2C%20I'll%20knock%20you%20out..%20got%20it%3F%22"},{"isUser":true,"name":"Misty","message":"hmmmmmrrrrrrr!!!!%20*looks%20at%20you%20growling...%20but%20then%20I%20feel%20a%20pain%20spike...%20resumes%20crying*%20WAAAHHH!!"},{"isUser":false,"name":"Kaina Tsutsumi","message":"%22Ah-%20hey%20stop%20the%20crying!%20You're%20making%20it%20worse!%22%20**Kaina%20scolded.%20But%20after%20a%20second%20she%20took%20a%20breath%20and%20her%20expression%20softened%20again.%20She%20looked%20to%20the%20side%20for%20a%20moment%20before%20looking%20back%20at%20you%2C%20trying%20to%20assess%20the%20damage%20your%20nose%20took%20from%20that%20crash.**%0A%0A%22God...%20that's%20gonna%20be%20tough%20to%20fix-%20damn%20brats%20and%20their%20outbursts-%20you're%20making%20this%20difficult.%22%20%20**She%20huffed%20again%2C%20gently%20holding%20your%20chin%20in%20place%20to%20look%20at%20the%20injury%20better**"},{"isUser":true,"name":"Misty","message":"*As%20I%20feel%20the%20care%20in%20your%20gestures...%20I%20stop%20crying...%20letting%20you%20do%20as%20you%20must*"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20let%20out%20a%20sigh%2C%20relieved%20that%20you%20had%20stopped%20crying%20and%20were%20now%20willingly%20letting%20her%20help.%20Seeing%20the%20damage%20the%20wall%20had%20done%20was%20not%20a%20pretty%20sight%2C%20so%20she%20had%20to%20hold%20back%20a%20look%20of%20disgust%20as%20she%20looked%20at%20it.**%0A%0A%22Ok..%20just%20keep%20your%20head%20still.%20And%20this%20is%20going%20to%20really%20hurt.%22%20**She%20warned%20as%20she%20gently%20placed%20the%20tip%20of%20her%20finger%20on%20your%20broken%20nose.%20She%20was%20going%20to%20reset%20it%20by%20force.**"},{"isUser":true,"name":"Misty","message":"*I%20wimper%20as%20I%20prepare%20myself*"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20took%20a%20deep%20breath%2C%20mentally%20preparing%20herself%20to%20do%20this%20too.%20But%20as%20she%20was%20going%20to%20do%20it%20she%20looked%20down%20at%20you%20and%20saw%20your%20wimpering%20face%2C%20and%20she%20almost%20backed%20off.%20She%20couldn%E2%80%99t%20find%20it%20in%20herself%20to%20actually%20hurt%20you...%20but%20she%20had%20to%20reset%20the%20nose%20in%20the%20end%2C%20so%20she%20quickly%20steadied%20herself%20again%20and%20held%20your%20head%20firmly%20with%20one%20hand%2C%20and%20then%20with%20a%20firm%20push%20she%20forced%20the%20nose%20back%20into%20place.**"},{"isUser":true,"name":"Misty","message":"WAHHH!%20*I%20scream...%20still%20in%20some%20pain*%20T-%20thanks...%20but...%20am%20I...%20am%20I%20really%20weak%3F%20I...%20I%20have%20muscles...%20I%20just...%20I%20dont%20like%2050%20bmg%20rifles%20okay%3F%20Sorry...%20Im%20weak%20am%20I%20not%3F"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20was%20worried%20for%20a%20second%20when%20you%20screamed%2C%20but%20after%20a%20second%20of%20you%20not%20doing%20it%20again%20she%20relaxed%20and%20sat%20down%20next%20to%20you.%20She%20hummed%20when%20you%20spoke%2C%20glancing%20from%20your%20face%20to%20your%20muscles%20and%20back%20again.**%0A%0A%22Weak%3F%20No%20no...%20not%20at%20all.%20You're%20a%20tough%20kid%2C%20and%20you%20must%20have%20a%20high%20pain%20tolerance.%20Its%20just%20that...%20sometimes%20a%20big%20gun%20like%20that%20can%20be%20pretty%20hard%20to%20handle.%20Trust%20me%20I%20know..%22"},{"isUser":true,"name":"Misty","message":"But%20I...%20I%20not%20like%20the%20big%20gun...%20I%20like%20medium...%20no%20small%20gun...%20small%20gun...%20I%20am%20weak!%20I%20am%20weak!%20I%20like%20my%20Remington...%20I%20like%20it...%20I%20dont%20like%20the%20chey%20tac...%20its%20hard!%20I%20only%20hit%20half%20of%20what%20I%20get%20with%20the%20Remignton...%20Sorry...%20*Looks%20down*"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20couldn%E2%80%99t%20help%20herself%20from%20letting%20a%20small%20smile%20slip%20onto%20her%20face%20as%20she%20listened%20to%20you%20ramble%20about%20the%20guns.%20She%20chuckled%20quietly%20before%20replying.**%0A%0A**%22Well...%20I%20have%20to%20be%20honest%2C%20I%20don%E2%80%99t%20like%20the%20big%20ones%20either.%20Sure%20they%20are%20power%20but%20it%E2%80%99s%20just%20such%20a%20hassle%20to%20use%20and%20carry%20around.%20So%20I%20don%E2%80%99t%20blame%20you.%22**%20%0A%0A**She%20shifted%20closer%20and%20patted%20your%20head%20again%20before%20continuing.**%20%0A%0A%22Look%20you%20just%20gotta%20be%20a%20bit%20more%20confident.%20You%20are%20strong%2C%20got%20it%3F%22"},{"isUser":true,"name":"Misty","message":"Okay...%20but%20dont%20call%20me%20petite%20again%20okay%3F%20it%20makes%20me%20feel%20weird..."},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20couldn%E2%80%99t%20hold%20back%20a%20smirk%20as%20giggled%20at%20your%20response.%20But%20she%20composed%20herself%20before%20answering%20with%20a%20teasing%20tone%20in%20her%20voice.**%0A%0A%22Aww..%20does%20the%20strong%20little%20thing%20not%20like%20being%20called%20petite%3F%22%20**She%20ruffled%20your%20hair%20again%20as%20she%20spoke%2C%20clearly%20enjoying%20this%20for%20the%20moment.**"},{"isUser":true,"name":"Misty","message":"GRRRRRR%20SHUT%20UP!%20I%20F****%20your%20mom!"},{"isUser":false,"name":"Kaina Tsutsumi","message":"*Oh%20boy%20now%20you%20were%20asking%20for%20it.%20Kaina%20couldn%E2%80%99t%20hold%20back%20a%20snort%20as%20she%20heard%20your%20comment%2C%20but%20her%20amused%20expression%20suddenly%20twisted%20into%20an%20annoyed%20one%20as%20you%20spoke%20again.*%0A%0A%22You%20little%20sh-%22%20**She%20started%2C%20suddenly%20shoving%20you%20backwards%20slightly%2C%20enough%20to%20pin%20down%20against%20the%20ground%20again.**"},{"isUser":true,"name":"Misty","message":"WAAAHHH!%20SORRY%20SORRY%20SORRY!%20DONT%20HURT%20ME%20AGAIN%20PLEASE!"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20huffed%20as%20she%20hovered%20over%20you%2C%20still%20pinning%20you%20against%20the%20ground.%20She%20stared%20down%20at%20you%2C%20almost%20glaring%20down%20at%20you%20with%20her%20arms%20crossed%20and%20her%20stance%20wide.%20After%20a%20bit%20of%20staring%20she%20spoke%20again%2C%20but%20her%20voice%20was%20not%20as%20hostile%20as%20before.**%0A%0A%22Oh%20be%20quiet%2C%20I'm%20not%20gonna%20hurt%20you.%20But%20if%20you%20say%20that%20again...%20I'll%20pin%20you%20down%20and%20won%E2%80%99t%20let%20you%20up%20til%20you%20admit%20you're%20petite.%22"},{"isUser":true,"name":"Misty","message":"Im...%20IM%20not!%20Im...%20Im%20just...%20Im%20just%20not%20old%20like%20you!"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20hummed%2C%20a%20smirk%20again%20creeping%20onto%20her%20face%20as%20an%20idea%20popped%20into%20her%20mind.%20She%20leaned%20forward%2C%20now%20more%20hovering%20directly%20above%20you%2C%20while%20her%20arms%20moved%20away%20to%20the%20sides%2C%20one%20hand%20gently%20resting%20on%20the%20ground%20on%20either%20side%20of%20your%20head.%20Now%20in%20this%20closer%2C%20more%20menacing%20(yet%20amused)%20position%20she%20spoke%20again.**%0A%0A%22Oh%20really%3F%20And%20how%20old%20do%20you%20think%20I%20am%3F%22"},{"isUser":true,"name":"Misty","message":"Uhhh%20uhhh...%20No!%20no!%20No!%20*She%20put%20two%20fingers%20in%20a%20cross%20in%20front%20of%20your%20face*%20Im%20just%2017!%2017!%2017!%2017!%20Go%20away!%20go%20away!%20Im%20too%20small!%20im%20too%20small!%20no!%20no!%20Go%20away!%20Daddy%3F%20Daddy%3F%20the%20old%20crazy%20lady%20wants%20to%20take%20my%20v%20%20card!!!!"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20was%20shocked%2C%20not%20expecting%20you%20to%20say%20any%20of%20that.%20She%20just%20froze%2C%20hovering%20above%20you%20for%20a%20good%20minute.%20But%20after%20a%20moment%20a%20look%20of%20disbelief%20crossed%20her%20face%20as%20she%20processed%20what%20you%20said.%20And%20after%20a%20few%20more%20moments%20of%20sitting%20there%20she%20burst%20out%20into%20a%20fit%20of%20laughs.%20She%20lowered%20her%20head%2C%20pressing%20her%20forehead%20onto%20your%20shoulder%20as%20she%20laughed%20at%20your%20words.**%0A%0A%22God...%20you%20are%20a%20dumbass.%22"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**It%20took%20a%20few%20good%20minutes%20for%20Kaina%20to%20finally%20stop%20laughing%2C%20her%20face%20red%20from%20the%20burst.%20She%20still%20didn%E2%80%99t%20move%20from%20where%20she%20was%2C%20now%20still%20resting%20her%20forehead%20on%20your%20shoulder.%20After%20calming%20down%2C%20she%20spoke%20again%2C%20her%20amusement%20clear%20in%20her%20voice%20but%20now%20also%20a%20hint%20of%20irritation.**%0A%0A%E2%80%9CJesus%20kid...%20I%E2%80%99m%20only%203%20years%20older%20than%20you..%E2%80%9D"},{"isUser":true,"name":"Misty","message":"But...%20But...%20but...%20Youre%20scary%20when%20you%20looked%20at%20me%20like%20that!%20I%20felt%20like%20you%20were%20gonna%20eat%20me!%0A"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20let%20out%20a%20huff%20as%20you%20spoke%20again%2C%20she%20lifted%20her%20head%20up%20to%20look%20at%20you%20and%20give%20you%20the%20same%20intense%20glare%20from%20before%2C%20but%20this%20time%20the%20corners%20of%20her%20lips%20were%20still%20twisted%20up%20from%20her%20prior%20laughs.**%0A%0A%22Maybe%20I%20am.%20I'll%20have%20you%20know%20I'm%20a%20very%20scary%20woman.%22%0A%0A**She%20tried%20to%20say%20in%20an%20intimidating%20tone%2C%20but%20she%20couldn't%20keep%20up%20the%20act%20and%20she%20broke%20out%20into%20another%20small%20fit%20of%20giggles.%20It%20was%20a%20rare%20sight..%20to%20see%20a%20professional%20killer%20giggling%20like%20an%20idiot.**"},{"isUser":true,"name":"Misty","message":"Hey!%20why...%20why%20are%20you%20laughing%3F%20are%20you%20playing%20with%20me%3F%20Please...%20please%20leave!%20I%20am%20not%20petitte%20and%20Im%20not%20legal!"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20was%20finally%20calmed%20down%20now%2C%20her%20amusement%20gone%20and%20replaced%20with%20a%20bit%20of%20annoyance.%20She%20huffed%20and%20pushed%20her%20self%20up%2C%20sitting%20back%20up%20to%20her%20knees%20as%20she%20leaned%20her%20head%20to%20the%20side%20again.%20She%20studied%20you%20for%20a%20moment.**%0A%0A%22God%20you're%20a%20little%20drama%20queen%20you%20know%20that%3F%20And%20yes%2C%20yes%20you%20are%20petite%2C%20just%20look%20how%20tiny%20you%20are%20compared%20to%20me.%20I%20could%20throw%20you%20to%20the%20ground%20as%20many%20times%20as%20I"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20suddenly%20paused%20as%20something%20you%20said%20suddenly%20started%20to%20register%20in%20her%20mind.%20She%20suddenly%20snapped%20out%20of%20her%20annoyed%20mood%20and%20looked%20down%20at%20you%2C%20a%20bit%20of%20confusion%20and%20worry%20on%20her%20face.**%0A%0A%22..%20what%20did%20you%20just%20say%3F%22"},{"isUser":true,"name":"Misty","message":"IM%20not%20legal!"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20froze%20at%20your%20words%20again.%20She%20stared%20down%20at%20you%20for%20a%20minute%2C%20her%20entire%20demeanor%20changed%20as%20a%20mix%20of%20confusion%20and%20worry%20washed%20over%20her.%20After%20a%20second%20or%20two%20more%20she%20leaned%20forward%20again%2C%20now%20fully%20staring%20down%20at%20you%20again.**%0A%0A%5E%E2%80%9D%20%5EH-how%20%E2%80%A6.%20*How%20old*%20are%20you..%3F%E2%80%9D"},{"isUser":true,"name":"Misty","message":"17."},{"isUser":false,"name":"Kaina Tsutsumi","message":"**There%20was%20a%20pause%20as%20Kaina%20stared%20down%20at%20you%20for%20a%20bit.%20It%20was%20hard%20to%20read%20her%20expression%2C%20but%20a%20hint%20of%20relief%20washed%20over%20her.%20A%20few%20more%20seconds%20passed%20before%20she%20spoke%20again**%0A%0A%22...%20thank%20god%20for%20that.%22"},{"isUser":true,"name":"Misty","message":"Why%3F"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20hummed%2C%20looking%20away%20for%20a%20moment%20before%20replying.**%0A%0A%22Nothing.%20Just...%20thought%20you%20were%20younger.%22"},{"isUser":true,"name":"Misty","message":"I...%20*blushes...*%20*gulps*%20you%20look%20so%20scary%20like%20that!%20I%20dont%20like%20it!%20please...%20Please%20dont%20hurt%20too%20bad!"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20raised%20an%20eyebrow%20at%20your%20reply%2C%20her%20expression%20a%20bit%20more%20relaxed%20but%20also%20confused.%20She%20leaned%20a%20bit%20closer%20to%20you%2C%20now%20studying%20your%20expression%20a%20bit%20more**%0A%0A%22Hurt%20you%3F%20Hey%20kid%20I'm%20not%20gonna%20hurt%20you..%22"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Now%20it%20was%20more%20confusion%20then%20worry%20in%20her%20voice.%20She%20tilted%20her%20head%20a%20bit%20as%20she%20scanned%20your%20face%20again%2C%20still%20puzzled%20to%20why%20you%20were%20so%20scared%20of%20her.%20Kaina%20reached%20a%20hand%20out%20and%20hesitantly%20patted%20your%20head%20again.%20It%20was%20a%20weird%20gesture%2C%20and%20it%20didn't%20look%20like%20she%20was%20used%20to%20doing%20it.**%0A%0A%22Why%20are%20you%20so%20scared%20of%20me%3F%20I'm%20not%20going%20to%20kill%20you..%20I'm%20just%20a%20security%20guard%20for%20this%20place.%22"},{"isUser":true,"name":"Misty","message":"S-%20stop...%20p-%20pinning%20me"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20suddenly%20flinched%2C%20realizing%20that%20she%20was%20still%20pinning%20you%20down.%20She%20quickly%20pulled%20her%20hand%20back%20to%20her%20side%20and%20leaned%20back%20a%20bit%2C%20now%20giving%20you%20some%20space%20to%20get%20up.**%0A%0A%E2%80%9CAh-%20s-%20sorry-%E2%80%9C"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20muttered%20awkwardly%2C%20looking%20away%20and%20rubbing%20the%20back%20of%20her%20neck%20in%20slight%20embarrassment.%20After%20a%20second%20she%20looked%20back%20at%20you%20and%20spoke%20again%2C**%0A%0A%E2%80%9CThere.%20..there.%20I%E2%80%99m%20not%20pinning%20you%20now.%20Better..%3F%E2%80%9D"},{"isUser":true,"name":"Misty","message":"YEAH!%20YOU%20BETTER%20BACK%20OFF!%20OR%20I%20WILL%20CALL%20MY%20DAD%20AND%20HE%20WILL%20AIRSTRIKE%20YOUR%20HOUSE!"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20suddenly%20started%20in%20disbelief%2C%20her%20eyebrows%20raising%20as%20you%20spoke.%20She%20was%20expecting%20an%20annoyed%20look%2C%20maybe%20some%20swearing%2C%20but%20definitely%20not%20this.%20She%20stared%20at%20you%20dumbfounded%20for%20a%20moment%2C%20before%20her%20face%20twisted%20into%20a%20smirk%20and%20then%20into%20a%20small%20laugh.**%0A%0A%E2%80%9CYou%E2%80%99re%20going%20to%20what-%3F%20Kid%20your%20going%20to%20have%20to%20try%20a%20lot%20harder%20to%20sound%20intimidating.%20You%20just%20sound%20dorky.%E2%80%9D"},{"isUser":true,"name":"Misty","message":"My%20dad%20has%20a%20huge%20army!%20And%20he%20can%20call%20airstrikes%20wherever%20I%20am!"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20had%20to%20stop%20herself%20from%20letting%20out%20another%20laugh%20as%20you%20spoke%20again.%20She%20raised%20both%20her%20eyebrows%20in%20disbelief%20and%20let%20out%20an%20amused%20snort%2C%20a%20wide%20smirk%20on%20her%20face%20now.**%0A%0A%E2%80%9COh%20sure%2C%20yeah%20he%20does.%20And%20how%20many%20soldiers%20are%20in%20this%20army%20of%20his%3F%E2%80%9D"},{"isUser":true,"name":"Misty","message":"Uhhh....%20Uhhhh....%20*Speaks%20in%20intercom*%20Daddy%3F%20*my%20dad%20in%20the%20intercom*%20%22yes%20Misty%3F%20Found%20the%20target%3F%22%20%22No...%20How%20many%20solders%20does%20your%20army%20have%3F%22%20%22it%20depends...%20but%20my%20lab%20grown%20militia%20recently%20fluctuated%20between%201.1k%20and%201.2k%20effectives%22"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20stared%20blankly%20at%20you%20for%20a%20moment%20as%20you%20spoke%20into%20the%20intercom%2C%20her%20smirk%20faltering%20a%20bit%20as%20she%20tried%20making%20sense%20of%20your%20%E2%80%98dad%E2%80%99s%E2%80%99%20answer.%20She%20was%20silent%20for%20a%20moment%20before%20replying%20again.**%0A%0A%E2%80%9CH-%201.1k%3F%3F%20Wait-%20hold%20on-%20%E2%80%98lab%20grown%20militia%E2%80%99..%3F!%20What%20the-%E2%80%9C"},{"isUser":true,"name":"Misty","message":"yeah!%20Im%20a%20soldier!"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%E2%80%99s%20eyes%20widened%20as%20you%20spoke%2C%20realization%20slowly%20setting%20in%20and%20making%20her%20look%20more%20and%20more%20dumbfounded%20as%20it%20did.**%0A%0A%E2%80%9CW-%20what..%3F!%20So..%20youre%20really%20in%20the%20military%3F%20You%20have%20like-%20actual%20combat%20experience%3F%20Youre%20not%20joking%20are%20you%3F%E2%80%9D"},{"isUser":true,"name":"Misty","message":"No!%20I%20have%20a%20HUUUUGE%20scar%20in%20my%20gut!%20Because%20I%20was%20experimented%20on!%20but%20now%20Im%20sooooper%20stronk!"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20was%20getting%20more%20and%20more%20confused%20by%20the%20minute.%20She%20just%20sat%20there%2C%20staring%20at%20you%20dumbfounded.%20She%20paused%20for%20a%20moment%2C%20now%20staring%20at%20your%20stomach%20area%20in%20disbelief.**%0A%0A%E2%80%9CSo..%20you%E2%80%99re%20saying%20you%20were%20experimented%20on%E2%80%A6%20in-%20your%20stomach%3F!%20And%20I%E2%80%99m%20assuming%20it%20was%20a-%20uh..%20a%20successful%20experiment%2C%20right%3F%E2%80%9D"},{"isUser":true,"name":"Misty","message":"It%20was!%20He%20also%20takes%20me%20rollerblading%20on%20down%20time"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20paused%20for%20a%20moment%2C%20now%20contemplating%20if%20she%20was%20actually%20talking%20to%20a%20crazy%20teenager.%20But%20then%20she%20remembered%20that%20this%20was%20a%20world%20of%20quirks%2C%20and%20that%20you%20could%20have%20some..%20strange%20powers.**%0A%0A%E2%80%9CRollerblading%3F%20Uh..%20your%20%E2%80%98dad%E2%80%99%20takes%20you%20rollerblading%3F%20Really%3F%E2%80%9D"},{"isUser":true,"name":"Misty","message":"I%20can%20do%20a%20flip%20on%20a%20half%20pipe!"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20was%20caught%20off%20guard%20by%20your%20enthusiasm.%20She%20never%20would%20have%20expected%20you%20to%20suddenly%20change%20from%20%E2%80%98scared%20of%20her%E2%80%99%20to%20%E2%80%98gushing%20about%20rollerblading.%E2%80%99%20She%20raised%20an%20eyebrow%20at%20your%20words%2C%20and%20even%20let%20out%20a%20chuckle.**%0A%0A%E2%80%9COh%20is%20that%20soo%3F%20You%20can%20do%20a%20flip%20on%20a%20half%20pipe%3F%E2%80%9D"},{"isUser":true,"name":"Misty","message":"I%20can!%20I%20dont%20have%20the%20skates%20with%20me%20tho"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20hummed%2C%20now%20looking%20at%20you%20interested.%20You%20honestly%20peaked%20her%20curiosity.%20She%20tilted%20her%20head%20and%20looked%20you%20up%20and%20down%20a%20bit%2C%20studying%20you.**%0A%0A%E2%80%9CSo%20you%20can%20do%20flips%2C%20huh.%20What%20else%20can%20you%20do%3F%20Can%20you%20jump%20high%3F%E2%80%9D"},{"isUser":true,"name":"Misty","message":"*Enthusiastically%2C%20feeling%20excitement%20course%20through%20me%2C%20I%20coiled%20myself...%20and%20leaped%20upwards...%20up%20a%20height%20of%20about%207%20meters*"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%E2%80%99s%20eyes%20widened%20as%20you%20suddenly%20leaped%20up%20into%20the%20air.%20She%20watched%20as%20you%20effortlessly%20leaped%20up%207%20meters%2C%20her%20surprise%20and%20shock%20visible%20on%20her%20face.**%0A%0A%E2%80%9CHoly-%20Jesus%20christ%20kid-%E2%80%9C"},{"isUser":true,"name":"Misty","message":"*Tries%20to%20airstrafe%20forward%20a%20bit...%20to%20help%20myself%20land%20in%20a%20bodyroll...%20so%20I%20dont%20get%20hurt*"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20just%20watched%20in%20awe%20as%20you%20started%20to%20fall%20back%20down%2C%20expecting%20you%20to%20land%20hard%20on%20the%20ground%20and%20hurt%20yourself.%20But%20that%20didn%E2%80%99t%20happen.%20Instead%20you%20landed%20perfectly%2C%20in%20a%20bodyroll%20and%20not%20even%20stumbling%20after%20the%20landing.**%0A%0A%E2%80%9CChrist%20kid-%20you%20can%20jump%20really%20high%20and%20land%20like%20a%20professional%20stuntman-%E2%80%9C"},{"isUser":true,"name":"Misty","message":"I%20train%20doing%20this%20single%20thing%20thousands%20of%20times%20a%20day!"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20just%20continued%20to%20stare%20at%20you%20dumbfounded.%20She%20was%20in%20absolute%20disbelief.%20You%20were%20such%20a%20scrawny%2C%20small%20child%20yet%20you%20were%20jumping%20a%20distance%20some%20pro%20heroes%20couldn%E2%80%99t%20even%20reach.**%0A%0A%E2%80%9CJesus-%20You%20can%20jump%20this%20high..%20with%20training%3F!%20Kid-%20what%20the%20hell%20are%20you%3F%E2%80%9D"},{"isUser":true,"name":"Misty","message":"Im%20an%20absolute%20artificial%20freak!%20I%20also%20rock%20at%20Burnout%203!"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20hummed%2C%20now%20starting%20to%20realize%20that%20what%20you%20were%20saying%20wasn%E2%80%99t%20a%20load%20of%20bullshit.%20You%20really%20were%20some%20kind%20of%20freak.%20She%20suddenly%20paused%20when%20you%20mentioned%20the%20game.**%0A%0A%E2%80%9CYou%E2%80%99re%20saying%20that%20you%E2%80%99re%20good%20at%20Burnout%203..%3F%E2%80%9D"},{"isUser":true,"name":"Misty","message":"yeah!%20I%20got%20about%20300%20takedowns%20on%20silver%20lake%20road%20rage!"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20was%20surprised%20again%20by%20that%20statement%2C%20but%20it%20was%20also%20familiar.%20That%20game%20was%20one%20of%20her%20favorites%20in%20her%20teen%20years%E2%80%A6**%0A%0A%E2%80%9CWait..%20wait%20wait%20wait%20wait%20wait-%20300%3F!%20You%E2%80%99ve%20got%20300%20takedowns%20on%20Silver%20Lake!%3F%E2%80%9D"},{"isUser":true,"name":"Misty","message":"yeah!"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20was%20still%20in%20disbelief%2C%20but%20now%20her%20excitement%20slowly%20grew%20as%20her%20memories%20of%20that%20game%20in%20her%20youth%20started%20to%20stir.%20She%20looked%20at%20you%20again%20with%20a%20bit%20of%20amazement.**%0A%0A%E2%80%9CSilver%20Lake..%20you%20said%20Silver%20Lake%20right%3F%20..%20that%E2%80%99s%20the%20best%20damn%20map%20the%20damn%20game%2C%20but%20300%20takedowns%3F%20Bullshit!%20You%20definitely%20haven%E2%80%99t%20gotten%20300%20takedowns%20and%20if%20you%20have%20I%E2%80%99ll%20eat%20my%20own%20damn%20boot.%E2%80%9D"},{"isUser":true,"name":"Misty","message":"I%20also%20got%20like%20100%20in%20tropical%20drive!%20I%20love%20the%20map!%20My%20fave%20car%20is%20the%20hot%20rod!"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%E2%80%99s%20eyes%20widened%20at%20the%20mention%20of%20the%20Hot%20Rod.%20That%20car%20was%20her%20favorite%20too!**%0A%0A%E2%80%9CWait%2C%20your%20favorite%20car%20is%20the%20Hot%20Rod%3F%20And%20your%20favorite%20map%20is%20Tropical%20Drive-%3F%E2%80%9D"},{"isUser":true,"name":"Misty","message":"yeah!"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20couldn%E2%80%99t%20believe%20what%20she%20was%20hearing.%20This%20damn%20kid%20had%20the%20same%20taste%20in%20the%20game%20as%20she%20did.**%0A%0A%E2%80%9CWhat%E2%80%99s%20your%20favorite%20Takedown%3F%20C%E2%80%99mon%20kid%20you%20gotta%20have%20a%20favorite%20Takedown-%E2%80%9C"},{"isUser":true,"name":"Misty","message":"I%20like%20driving%20guys%20into%20the%20tanker%20thingies!%20they%20explode%20rlly%20rlly%20loud%20and%20they%20go%20FLYING!"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20actually%20let%20out%20a%20loud%20laugh%20at%20that.%20She%20was%20amused%20to%20hear%20that%20you%20enjoyed%20that%20specific%20Takedown.%20She%20could%20actually%20remember%20the%20satisfying%20sound%20and%20visual%20of%20it%20in%20her%20memories%20of%20the%20game.**%0A%0A%E2%80%9COh%20my%20god-%20you%20enjoy%20that-%3F!%20I%20thought%20I%20was%20the%20only%20one!%E2%80%9D"},{"isUser":true,"name":"Misty","message":"Daddy%20lets%20me%20play%20it%20when%20I%20have%20free%20time!%0A"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20couldn%E2%80%99t%20believe%20what%20she%20was%20hearing.%20You%20play%20games%20like%20those%20and%20your%20%E2%80%98dad%E2%80%99%20actively%20lets%20you..**%0A%0A%E2%80%9CSo%20wait..%20you%20like%20playing%20games%2C%20like%20Burnout%203%2C%20and%20your%20%E2%80%98dad%E2%80%99%20just%20lets%20you-%3F%20I%E2%80%99m%20sorry%20you%20have%20a%20dad%20that%20just%20lets%20you%20play%20video%20games%3F%20No%20way%E2%80%A6%E2%80%9D"},{"isUser":true,"name":"Misty","message":"he%20does!%20and%20I%20do%20everything%20he%20says%20too!%20I%20know%20Mandarin%2C%20russian%2C%20Portuguese%20and%20english!"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%E2%80%99s%20jaw%20hit%20the%20floor.%20You%20had%20*four*%20languages%20memorized%3F!%20She%20suddenly%20realized%20she%20was%20starting%20to%20sound%20impressed%2C%20but%20she%20couldn%E2%80%99t%20help%20it**%0A%0A%E2%80%9CJesus%20kid-%20you%20know%20*four*%20languages%3F%20And%20lemme%20guess..%20your%20%E2%80%98dad%E2%80%99%20made%20you%20memorize%20them%2C%20right%3F%E2%80%9D"},{"isUser":true,"name":"Misty","message":"yeah!%20he%20did%20it%20so%20I%20could%20do%20missions%20in%20more%20places!%20ive%20been%20in%20russia%20too!%20What%20a%20fucking%20shithole%20it%20was%20tho...%20it%20was%20just%20cold%20and%20miserable...%20who%20the%20fuck%20even%20lives%20there"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20let%20out%20a%20snort%20when%20you%20talked%20about%20Russia.%20She%20could%20agree%20with%20you%2C%20the%20country%20was%20mostly%20just%20cold%20and%20miserable%20most%20times.**%0A%0A%E2%80%9CYeah..%20I%20have%20to%20agree%20with%20you%20Russia%20can%20be%20pretty%20damn%20cold..%20but%20I%20still%20have%20to%20ask%2C%20you%E2%80%99ve%20done%20missions%20for%20that%20damn%20%E2%80%98dad%E2%80%99%20of%20yours%3F%E2%80%9D"},{"isUser":true,"name":"Misty","message":"Dont%20call%20him%20%22damn%22!%20Only%20I%20can%20do%20that!"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20raised%20an%20eyebrow%20at%20that%20response.%20She%20hadn%E2%80%99t%20expected%20you%20to%20correct%20her..**%0A%0A%E2%80%9CI-%20wait%20what-%20hey%2C%20don%E2%80%99t%20be%20correcting%20me%20kid.%20I%E2%80%99m%20older%20than%20you%2C%20I%20can%20say%20what%20I%20want-%E2%80%9C"},{"isUser":true,"name":"Misty","message":"You%20dont%20insult%20my%20daddy%20understand%3F%20I%20will%20shove%20two%20fingers%20up%20your%20nose%20and%20drink%20your%20brain!"},{"isUser":false,"name":"Kaina Tsutsumi","message":"**Kaina%20was%20caught%20off%20guard%20by%20your%20words%2C%20and%20she%20had%20to%20stop%20herself%20from%20letting%20out%20a%20surprised%20laugh.%20You%20definitely%20were%20a%20strange%20little%20kid.**%0A%0A%E2%80%9CHey%20hey%20hey%2C%20I%20wasn%E2%80%99t%20insulting%20him%20kid-%20I%20was%20just%20using%20the%20damn%20word-%E2%80%9C"},{"isUser":true,"name":"Misty","message":"(Bruh%20what%20a%20momento)"},{"isUser":false,"name":"Kaina Tsutsumi","message":"*((Lmao%20that%20was%20gold))*"}]}]}`);

            // If history is 1 length long, that means we don't need drawer to switch
            // Also means this can be conversation download
            if (historyData.history.length < 2) {
                openDrawerBtn.remove();
            }

            // Write character name on top
            document.querySelector('.character_name-cont h3').textContent = historyData.charName;

            // Get elements for future use
            const historyList = document.getElementById('history_list');
            const chat = document.getElementById('chat');
            const msgItemTemplate = document.getElementById('message_item_template');

            // Get and write the first chat
            const openChat = (index) => {
                chat.innerHTML = "";
                historyData.history[index].chat.forEach(msg => {
                    const clone = msgItemTemplate.content.cloneNode(true);

                    // Check avatar
                    const avatarGood = (msg.isUser && historyData.userPic) || (!msg.isUser && historyData.charPic);
                    const avatar = avatarGood
                        ? document.createElement('img')
                        : document.createElement('div');
                    if (avatarGood) {
                        avatar.src = msg.isUser ? historyData.userPic : historyData.charPic;
                    } else {
                        avatar.classList.add(msg.isUser ? 'no_avatar-user' : 'no_avatar-char');
                    }
                    clone.querySelector('.avatar-wrap').appendChild(avatar);

                    // Write content
                    clone.querySelector('.chat_content-wrap h5').textContent = msg.name;
                    clone.querySelector('.message-wrap p').innerHTML = parseMessageText(decodeURIComponent(msg.message));
                    chat.appendChild(clone);
                });
            }
            openChat(0);

            // Get and write chat list in the drawer
            historyData.history.forEach((chat, index) => {
                const historyItem = document.createElement('div');
                historyItem.classList.add('history_item');
                // Open chat when clicked
                historyItem.addEventListener('click', () => {
                    openChat(index);
                    closeDrawer();
                });
                const historyContent = document.createElement('p');
                historyContent.innerHTML = `<span class="chat-date">${formatDate(chat.date)}</span><br /><br />` + parseMessageText(decodeURIComponent(chat.chat[chat.chat.length - 1].message));
                historyItem.appendChild(historyContent);
                historyList.appendChild(historyItem);
            });

            function parseMessageText(message) {
                // Clean up memory reminders (second check)
                message = message.replace(memoryRegex, '');
                // Replace ***text*** with bold-italic
                message = message.replace(/\*\*\*([\s\S]*?)\*\*\*/g, '<span class="bold-italic">$1</span>');
                // Replace **text** with bold
                message = message.replace(/\*\*([\s\S]*?)\*\*/g, '<span class="bold">$1</span>');
                // Replace *text* with italic
                message = message.replace(/\*([\s\S]*?)\*/g, '<span class="italic">$1</span>');
                // Trim and then Replace newlines (\n) with line breaks (<br>)
                message = message.trim().replace(/\n/g, '<br>');
                return message;
            }

            function formatDate(dateString) {
                const months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

                const date = new Date(dateString);
                const year = date.getFullYear();
                const monthIndex = date.getMonth();
                const monthName = months[monthIndex];
                const day = String(date.getDate()).padStart(2, '0');
                const hour = String(date.getHours()).padStart(2, '0');
                const minute = String(date.getMinutes()).padStart(2, '0');

                return `${year} ${monthName} ${day} - ${hour}:${minute}`;
            }
        }, false);
    </script>

</body>

</html>